<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>My Account - Trendora</title>
   <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700;800;900&amp;family=Inter:wght@300;400;500;600;700&amp;display=swap" rel="stylesheet">
    <link rel="icon" type="image/jpg" href="/trendora.jpg">
  <style>
    /* Reset & base */
    * { box-sizing: border-box; margin: 0; padding: 0; }
    :root {
      --accent: #e74c3c;
      --dark: #2c3e50;
      --muted: #777;
      --bg: #f8f9fa;
    }
    body {
      font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background: var(--bg);
      color: #333;
      line-height: 1.6;
    }

    /* Header */
    header { background:#fff; position:sticky; top:0; z-index:1200; box-shadow:0 2px 5px rgba(0,0,0,0.06); }
    nav {
      max-width:1400px; margin:0 auto; display:flex; align-items:center; justify-content:space-between;
      padding:1rem 5%;
      gap:1rem;
    }
    .logo { font-weight:700; font-size:1.6rem; color:var(--dark); text-decoration:none; font-family: "Playfair Display", serif; }
    .nav-left { display:flex; align-items:center; gap:1.5rem; }
    .nav-links { display:flex; gap:1rem; list-style:none; align-items:center; }
    .nav-links a { color:#555; text-decoration:none; padding:0.35rem 0.5rem; border-radius:6px; font-weight:500; }
    .nav-links a:hover, .nav-links a.active { color:var(--accent); background: rgba(231,76,60,0.04); }
    .nav-item { position:relative; display:flex; align-items:center; gap:0.25rem; }
    .shop-caret { background:transparent; border:none; cursor:pointer; font-size:0.95rem; padding:0.2rem 0.35rem; border-radius:6px; }
    .shop-dropdown {
      position:absolute; left:0; top:calc(100% + 8px); min-width:200px; background:#fff; border-radius:8px; box-shadow:0 8px 24px rgba(0,0,0,0.12);
      padding:0.4rem; display:none; z-index:1400;
    }
    .shop-dropdown a { display:block; color:var(--dark); padding:0.55rem 0.8rem; text-decoration:none; border-radius:6px; }
    .shop-dropdown a:hover { background:#f7f9fb; }
    .shop-dropdown.active { display:block; }

    .nav-icons { display:flex; gap:1rem; align-items:center; }
    .nav-icons a { text-decoration:none; color:#555; font-size:1.1rem; position:relative; }
    .cart-count { position:absolute; top:-8px; right:-8px; background:var(--accent); color:white; font-size:0.7rem; padding:2px 6px; border-radius:999px; display:none; min-width:18px; text-align:center; }

    .mobile-menu-btn { display:none; background:none; border:none; font-size:1.4rem; cursor:pointer; color:#555; }

    /* Mobile drawer */
    .mobile-backdrop { display:none; position:fixed; inset:0; background:rgba(0,0,0,0.4); z-index:1500; }
    .mobile-backdrop.active { display:block; }
    .mobile-drawer {
      position:fixed; left:0; top:0; bottom:0; width:300px; max-width:86%; background:#fff; padding:1rem; transform:translateX(-100%); transition:transform .28s ease; z-index:1600; overflow:auto;
    }
    .mobile-drawer.active { transform:translateX(0); }

    /* Page layout */
    .account-page { max-width:1400px; margin:0 auto; padding:60px 5%; display:flex; gap:40px; }
    .sidebar {
      width:280px; background:#fff; padding:2rem; border-radius:10px; box-shadow:0 5px 15px rgba(0,0,0,0.08); position:sticky; top:100px; height:fit-content;
    }
    .sidebar h1 { font-size:1.3rem; color:var(--dark); margin-bottom:1rem; }
    .sidebar-menu { list-style:none; }
    .sidebar-menu li { margin-bottom:10px; }
    .sidebar-menu button {
      width:100%; padding:12px 16px; text-align:left; border:none; background:#fff; cursor:pointer; border-radius:8px; font-size:15px; color:#555; display:flex; gap:10px; align-items:center;
    }
    .sidebar-menu button:hover:not(.active) { background:#f3f4f6; color:var(--dark); }
    .sidebar-menu button.active { background:var(--dark); color:#fff; }

    .main-content { flex:1; background:#fff; padding:2.2rem; border-radius:10px; box-shadow:0 5px 15px rgba(0,0,0,0.06); }

    .content-section { display:none; }
    .content-section.active { display:block; animation:fadeIn .28s ease; }
    @keyframes fadeIn { from { opacity:0; transform:translateY(8px); } to { opacity:1; transform:none; } }

    h2.section-title { font-size:1.8rem; color:var(--dark); margin-bottom:1.2rem; }

    /* Forms */
    .form-row { display:grid; grid-template-columns:1fr 1fr; gap:16px; margin-bottom:16px; }
    .form-group { display:flex; flex-direction:column; }
    .form-group.full { grid-column:1/-1; }
    label { margin-bottom:8px; font-weight:600; color:#444; font-size:14px; }
    input, textarea, select { padding:10px 12px; border:1px solid #e3e3e3; border-radius:6px; font-size:15px; }
    input:focus, textarea:focus, select:focus { outline:none; border-color:var(--accent); box-shadow:0 0 0 3px rgba(231,76,60,0.06); }
    textarea { min-height:110px; resize:vertical; }

    .save-btn { background:var(--dark); color:#fff; padding:10px 18px; border:none; border-radius:6px; cursor:pointer; margin-top:8px; }
    .save-btn:hover { background:#162127; }

    /* Orders / wishlist / cards */
    .order-card { border:1px solid #e9e9e9; padding:14px; border-radius:8px; margin-bottom:12px; }
    .order-header { display:flex; justify-content:space-between; gap:12px; border-bottom:1px solid #f3f3f3; padding-bottom:10px; margin-bottom:10px; }
    .order-items { display:flex; flex-direction:column; gap:6px; }
    .order-total { display:flex; justify-content:space-between; font-weight:700; color:var(--accent); padding-top:8px; border-top:1px solid #f3f3f3; }

    .wishlist-grid { display:grid; grid-template-columns:repeat(auto-fill,minmax(240px,1fr)); gap:16px; }
    .wishlist-item { border:1px solid #eaeaea; border-radius:8px; overflow:hidden; background:#fff; display:flex; flex-direction:column; }
    .wishlist-image { height:180px; background:#f5f5f5; display:flex; align-items:center; justify-content:center; font-size:3rem; }
    .wishlist-details { padding:12px; display:flex; flex-direction:column; gap:8px; flex:1; }

    .btn { display:inline-block; padding:8px 12px; border-radius:6px; border:none; cursor:pointer; text-align:center; }
    .btn-primary { background:var(--dark); color:#fff; }
    .btn-danger { background:#fff; color:var(--accent); border:1px solid var(--accent); }
    .btn-primary:hover { background:#111827; }
    .btn-danger:hover { background:var(--accent); color:#fff; }

    /* Empty */
    .empty-state { text-align:center; padding:3rem 1rem; color:var(--muted); }

    /* Toast */
    .toast { position:fixed; right:1rem; bottom:1rem; background:var(--dark); color:#fff; padding:0.75rem 1rem; border-radius:6px; transform:translateX(220px); transition:transform .28s ease, opacity .2s; opacity:0; z-index:3000; }
    .toast.show { transform:translateX(0); opacity:1; }
    .toast.success { background:#27ae60; }
    .toast.error { background:var(--accent); }

   
/* Footer (replace/merge with existing footer rules) */
footer {
  background: #2c3e50;
  color: white;
  padding: 4rem 5% 2rem;
  margin-top: 4rem;
}

.footer-inner {
  max-width: 1400px;
  margin: 0 auto;
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 3rem;
  margin-bottom: 3rem;
}

.footer-brand .logo {
  color: white;
  font-size: 1.8rem;
  margin-bottom: 1rem;
  display: block;
  font-family: "Playfair Display", serif;
  text-decoration: none;
}

.footer-brand p {
  color: #bdc3c7;
  margin-top: 0.5rem;
  line-height: 1.8;
  max-width: 340px;
}

.footer-links h4 {
  margin-bottom: 1rem;
  color: white;
}

.footer-links ul {
  list-style: none;
  padding: 0;
  margin: 0;
}

.footer-links a {
  color: #bdc3c7;
  text-decoration: none;
  display: block;
  padding: 0.25rem 0;
  transition: color 0.3s;
}

.footer-links a:hover {
  color: white;
}

.social-icons {
  display: flex;
  gap: 1rem;
  margin-top: 1rem;
}

.social-icons a {
  width: 45px;
  height: 45px;
  background: #34495e;
  border-radius: 50%;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-size: 1.2rem;
  color: white;
  text-decoration: none;
  transition: transform 0.25s, background 0.25s;
}

.social-icons a:hover {
  background: #e74c3c;
  transform: translateY(-3px);
}

.footer-bottom {
  max-width: 1400px;
  margin: 0 auto;
  padding-top: 2rem;
  border-top: 1px solid #34495e;
  display: flex;
  justify-content: space-between;
  align-items: center;
  flex-wrap: wrap;
  gap: 1rem;
  font-size: 0.9rem;
}

.footer-bottom .links {
  display: flex;
  gap: 1rem;
  align-items: center;
}

.footer-bottom a {
  color: #bdc3c7;
  text-decoration: none;
}

.footer-bottom a:hover {
  color: white;
}

/* Responsive: smaller screens */
@media (max-width: 768px) {
  .footer-bottom { flex-direction: column; text-align: center; }
  .footer-brand p { margin: 0 auto 1rem; }
}
.logo-img {
  display: inline-block;
  height: 40px; / header logo height /
  width: auto;
}

.footer-logo-img {
  height: 48px; / footer logo height /
  width: auto;
}

/ Responsive tweak /
@media (max-width: 480px) {
  .logo-img { height: 32px; }
  .footer-logo-img { height: 36px; }
    }
  </style>
</head>
<body>
  <header>
    <nav>
      <div class="nav-left">
        <a href="index.html" class="logo" aria-label="Trendora home">
  <img src="/trendora.jpg" alt="Trendora" class="logo-img">
</a>

        <ul class="nav-links" id="desktopNav" role="menubar" aria-label="Main menu">
          <li role="none"><a role="menuitem" href="index.html">Home</a></li>

          <li class="nav-item" role="none" aria-haspopup="true">
            <a class="nav-link" href="shop.html" role="menuitem" aria-haspopup="true">Shop</a>
            <button class="shop-caret" id="shopCaret" aria-expanded="false" aria-controls="shopDropdown" aria-label="Open shop categories">‚ñæ</button>

            <div class="shop-dropdown" id="shopDropdown" role="menu" aria-label="Shop categories">
              <a role="menuitem" href="women.html">Women</a>
              <a role="menuitem" href="men.html">Men</a>
              <a role="menuitem" href="accessories.html">Accessories</a>
              <a role="menuitem" href="shoes.html">Shoes</a>
            </div>
          </li>

          <li role="none"><a role="menuitem" href="about.html" class="active">About Us</a></li>
          <li role="none"><a role="menuitem" href="contact.html">Contact</a></li>
        </ul>
      </div>

      <div style="display:flex;align-items:center;gap:1rem;">
        <div class="nav-icons" aria-hidden="false">
          <a href="search.html" title="Search" aria-label="Search">üîç</a>
          <a href="account.html" title="My Account" aria-label="My Account">üë§</a>
          <a href="cart.html" title="Cart" aria-label="Shopping Cart" style="position:relative;">
            üõí
            <span id="cartCount" class="cart-count">0</span>
          </a>
        </div>

        <button class="mobile-menu-btn" id="mobileMenuBtn" aria-label="Open menu">‚ò∞</button>
      </div>
    </nav>
  </header>

  <!-- Mobile drawer/backdrop -->
  <div id="mobileBackdrop" class="mobile-backdrop" aria-hidden="true">
    <div id="mobileDrawer" class="mobile-drawer" role="dialog" aria-modal="true" aria-label="Mobile menu">
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem;">
        <a href="index.html" class="logo" style="font-size:1.1rem">Trendora</a>
        <button id="mobileCloseBtn" aria-label="Close menu" style="background:none;border:none;font-size:1.2rem;cursor:pointer;">‚úï</button>
      </div>

      <nav aria-label="Mobile navigation">
        <ul style="list-style:none;">
          <li style="padding:0.5rem 0;"><a href="index.html">Home</a></li>
          <li style="padding:0.5rem 0;">
            <div style="display:flex;justify-content:space-between;align-items:center;">
              <a href="shop.html">Shop</a>
              <button id="mobileShopToggle" aria-expanded="false" style="background:none;border:none;cursor:pointer;">‚ñæ</button>
            </div>
            <div id="mobileShopSub" style="display:none;margin-top:0.5rem;padding-left:0.75rem;">
              <a href="women.html" style="display:block;padding:0.35rem 0;">Women</a>
              <a href="men.html" style="display:block;padding:0.35rem 0;">Men</a>
              <a href="accessories.html" style="display:block;padding:0.35rem 0;">Accessories</a>
              <a href="shoes.html" style="display:block;padding:0.35rem 0;">Shoes</a>
            </div>
          </li>
          <li style="padding:0.5rem 0;"><a href="about.html">About Us</a></li>
          <li style="padding:0.5rem 0;"><a href="contact.html">Contact</a></li>
          <li style="padding:0.75rem 0;"><a href="account.html" style="display:inline-block;padding:0.5rem 0.8rem;background:#f3f4f6;border-radius:6px;text-decoration:none;color:var(--dark);font-weight:600;">My Account</a></li>
          <li style="padding:0.5rem 0;">
            <a href="signin.html" style="display:inline-block;padding:0.45rem 0.8rem;background:var(--dark);color:#fff;border-radius:6px;text-decoration:none;margin-right:0.5rem;">Sign In</a>
            <a href="signup.html" style="display:inline-block;padding:0.45rem 0.8rem;background:var(--accent);color:#fff;border-radius:6px;text-decoration:none;">Sign Up</a>
          </li>
        </ul>
      </nav>
    </div>
  </div>

  <!-- Account page -->
  <div class="account-page">
    <aside class="sidebar" aria-labelledby="accountTitle">
      <h1 id="accountTitle">My Account</h1>
      <ul class="sidebar-menu" role="tablist" aria-label="Account sections">
        <li><button class="menu-btn active" data-section="profile" role="tab" aria-selected="true">üë§ Profile</button></li>
        <li><button class="menu-btn" data-section="orders" role="tab" aria-selected="false">üì¶ Orders</button></li>
        <li><button class="menu-btn" data-section="wishlist" role="tab" aria-selected="false">‚ù§Ô∏è Wishlist</button></li>
        <li><button class="menu-btn" data-section="settings" role="tab" aria-selected="false">‚öôÔ∏è Settings</button></li>
        <li><button class="menu-btn" onclick="signOut()" role="button">üö™ Sign Out</button></li>
      </ul>
    </aside>

    <main class="main-content">
      <!-- Profile -->
      <section id="profile" class="content-section active" role="tabpanel" aria-labelledby="profile-tab">
        <h2 class="section-title">Profile Information</h2>
        <form id="profileForm" onsubmit="saveProfile(event)" novalidate>
          <div class="form-row">
            <div class="form-group">
              <label for="firstName">First name</label>
              <input id="firstName" name="firstName" required />
            </div>
            <div class="form-group">
              <label for="lastName">Last name</label>
              <input id="lastName" name="lastName" required />
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="email">Email</label>
              <input id="email" name="email" type="email" required />
            </div>
            <div class="form-group">
              <label for="phone">Phone</label>
              <input id="phone" name="phone" type="tel" />
            </div>
          </div>

          <div class="form-row">
            <div class="form-group full">
              <label for="address">Address</label>
              <textarea id="address" name="address" placeholder="Street, City, State, ZIP"></textarea>
            </div>
          </div>

          <button type="submit" class="save-btn">Save Changes</button>
        </form>
      </section>

      <!-- Orders -->
      <section id="orders" class="content-section" role="tabpanel" aria-labelledby="orders-tab">
        <h2 class="section-title">Recent Orders</h2>

        <div class="order-card" aria-live="polite">
          <div class="order-header">
            <div>
              <div class="order-number">Order #10234</div>
              <div style="color:var(--muted);font-size:0.95rem">Placed on Mar 10, 2025</div>
            </div>
            <div><span class="order-status shipped" style="padding:6px 10px;border-radius:20px;background:#cce5ff;color:#004085;font-weight:600;font-size:0.9rem;">Shipped</span></div>
          </div>

          <div class="order-items">
            <div class="order-item"><span>Classic Denim Jacket</span><span>$79.00</span></div>
            <div class="order-item"><span>Striped Tee</span><span>$24.00</span></div>
          </div>

          <div class="order-total"><span>Total</span><span>$103.00</span></div>
        </div>

        <div class="order-card" aria-live="polite">
          <div class="order-header">
            <div>
              <div class="order-number">Order #10198</div>
              <div style="color:var(--muted);font-size:0.95rem">Placed on Feb 22, 2025</div>
            </div>
            <div><span class="order-status delivered" style="padding:6px 10px;border-radius:20px;background:#d4edda;color:#155724;font-weight:600;font-size:0.9rem;">Delivered</span></div>
          </div>

          <div class="order-items">
            <div class="order-item"><span>Leather Belt</span><span>$39.00</span></div>
          </div>

          <div class="order-total"><span>Total</span><span>$39.00</span></div>
        </div>

        <a href="orders.html" class="btn btn-primary" style="margin-top:8px; display:inline-block;">View All Orders</a>
      </section>

      <!-- Wishlist -->
      <section id="wishlist" class="content-section" role="tabpanel" aria-labelledby="wishlist-tab">
        <h2 class="section-title">My Wishlist</h2>

        <div id="wishlistGrid" class="wishlist-grid" aria-live="polite">
          <div class="wishlist-item" data-id="w1">
            <div class="wishlist-image" aria-hidden="true">üëó</div>
            <div class="wishlist-details">
              <h3 style="margin:0;color:var(--dark)">Floral Midi Dress</h3>
              <div class="wishlist-price" style="color:var(--accent);font-weight:700">$59.00</div>
              <div style="display:flex;gap:8px;">
                <button class="btn btn-primary" onclick="addToCartFromWishlist('w1')">Add to cart</button>
                <button class="btn btn-danger" onclick="removeWishlistItem('w1')">Remove</button>
              </div>
            </div>
          </div>

          <div class="wishlist-item" data-id="w2">
            <div class="wishlist-image" aria-hidden="true">üëú</div>
            <div class="wishlist-details">
              <h3 style="margin:0;color:var(--dark)">Classic Leather Tote</h3>
              <div class="wishlist-price" style="color:var(--accent);font-weight:700">$129.00</div>
              <div style="display:flex;gap:8px;">
                <button class="btn btn-primary" onclick="addToCartFromWishlist('w2')">Add to cart</button>
                <button class="btn btn-danger" onclick="removeWishlistItem('w2')">Remove</button>
              </div>
            </div>
          </div>
        </div>

        <div id="wishlistEmpty" class="empty-state" style="display:none;">
          <div style="font-size:2.5rem;margin-bottom:0.6rem;">üíî</div>
          <h3>No items in your wishlist</h3>
          <p>Looks like you haven't saved any favorites yet. Browse the shop and add items you love.</p>
          <a href="shop.html" class="btn btn-primary" style="margin-top:0.6rem;">Shop Now</a>
        </div>
      </section>

      <!-- Settings -->
      <section id="settings" class="content-section" role="tabpanel" aria-labelledby="settings-tab">
        <h2 class="section-title">Account Settings</h2>

        <form id="settingsForm" onsubmit="saveSettings(event)" novalidate>
          <div class="form-row">
            <div class="form-group">
              <label for="password">New password</label>
              <input id="password" type="password" />
            </div>
            <div class="form-group">
              <label for="confirmPassword">Confirm password</label>
              <input id="confirmPassword" type="password" />
            </div>
          </div>

          <div class="form-row">
            <div class="form-group full">
              <label for="newsletter">Email preferences</label>
              <select id="newsletter">
                <option value="all">Receive all emails</option>
                <option value="important">Only important updates</option>
                <option value="none">No emails</option>
              </select>
            </div>
          </div>

          <button class="save-btn" type="submit">Save Settings</button>
        </form>
      </section>
    </main>
  </div>

  <!-- Toast -->
  <div id="toast" class="toast" role="status" aria-live="polite"></div>

  <!-- Footer -->
  <footer>
  <div class="footer-inner">
    <div class="footer-brand">
      <a href="index.html" class="logo" aria-label="Trendora home">
  <img src="/trendora.jpg" alt="Trendora" class="logo-img">
</a>
      <p>Your choice, your style, your identity. Discover curated fashion trends that define who you are.</p>
      <div class="social-icons" aria-label="Follow us">
        <a href="#" aria-label="Facebook">üìò</a>
        <a href="#" aria-label="Instagram">üì∑</a>
        <a href="#" aria-label="Twitter">üê¶</a>
        <a href="#" aria-label="Pinterest">üìå</a>
      </div>
    </div>

    <div class="footer-links" aria-labelledby="quick-links-title">
      <h4 id="quick-links-title">Quick Links</h4>
      <ul>
        <li><a href="shop.html">Shop All</a></li>
        <li><a href="about.html">About Us</a></li>
        <li><a href="contact.html">Contact</a></li>
        <li><a href="account.html">My Account</a></li>
      </ul>
    </div>

    <div class="footer-links" aria-labelledby="customer-service-title">
      <h4 id="customer-service-title">Customer Service</h4>
      <ul>
        <li><a href="shipping.html">Shipping Info</a></li>
        <li><a href="returns.html">Returns</a></li>
        <li><a href="size.html">Size Guide</a></li>
        <li><a href="faq.html">FAQ</a></li>
      </ul>
    </div>
  </div>

  <div class="footer-bottom">
    <div>¬© 2025 Trendora. All rights reserved.</div>
    <div class="links">
      <a href="privacy.html">Privacy Policy</a>
      <a href="terms.html">Terms of Service</a>
    </div>
  </div>
</footer>

  <script>
    // Basic interactivity: shop dropdown, mobile drawer, section switching, toast, profile/settings, wishlist/cart

    // Elements
    const shopCaret = document.getElementById('shopCaret');
    const shopDropdown = document.getElementById('shopDropdown');
    const mobileMenuBtn = document.getElementById('mobileMenuBtn');
    const mobileBackdrop = document.getElementById('mobileBackdrop');
    const mobileDrawer = document.getElementById('mobileDrawer');
    const mobileCloseBtn = document.getElementById('mobileCloseBtn');
    const mobileShopToggle = document.getElementById('mobileShopToggle');
    const mobileShopSub = document.getElementById('mobileShopSub');
    const toastEl = document.getElementById('toast');
    const cartCountEl = document.getElementById('cartCount');

    // Sidebar menu buttons & sections
    const menuButtons = document.querySelectorAll('.menu-btn[data-section]');
    const sections = document.querySelectorAll('.content-section');

    // Cart & localStorage
    let cartCount = Number(localStorage.getItem('cartCount')) || 0;
    if (cartCount > 0) {
      cartCountEl.textContent = cartCount;
      cartCountEl.style.display = 'inline-block';
    }

    // Shop dropdown
    function toggleShopDropdown(force) {
      const active = shopDropdown.classList.contains('active');
      const should = typeof force === 'boolean' ? force : !active;
      shopDropdown.classList.toggle('active', should);
      shopCaret.setAttribute('aria-expanded', should ? 'true' : 'false');
    }
    shopCaret && shopCaret.addEventListener('click', (e) => { e.stopPropagation(); toggleShopDropdown(); });
    document.addEventListener('click', (e) => {
      if (!shopDropdown.contains(e.target) && e.target !== shopCaret) toggleShopDropdown(false);
    });

    // Mobile drawer
    function openMobile() {
      mobileBackdrop.classList.add('active');
      mobileDrawer.classList.add('active');
      mobileBackdrop.setAttribute('aria-hidden', 'false');
      // focus first link for accessibility
      const firstLink = mobileDrawer.querySelector('a');
      if (firstLink) firstLink.focus();
    }
    function closeMobile() {
      mobileBackdrop.classList.remove('active');
      mobileDrawer.classList.remove('active');
      mobileBackdrop.setAttribute('aria-hidden', 'true');
      mobileMenuBtn.focus();
    }
    mobileMenuBtn && mobileMenuBtn.addEventListener('click', openMobile);
    mobileCloseBtn && mobileCloseBtn.addEventListener('click', closeMobile);
    mobileBackdrop && mobileBackdrop.addEventListener('click', (e) => { if (e.target === mobileBackdrop) closeMobile(); });

    // mobile shop toggle
    mobileShopToggle && mobileShopToggle.addEventListener('click', () => {
      const show = mobileShopSub.style.display !== 'block';
      mobileShopSub.style.display = show ? 'block' : 'none';
      mobileShopToggle.setAttribute('aria-expanded', show ? 'true' : 'false');
    });

    // Section switching
    function showSection(name) {
      sections.forEach(s => s.id === name ? s.classList.add('active') : s.classList.remove('active'));
      menuButtons.forEach(btn => {
        const is = btn.dataset.section === name;
        btn.classList.toggle('active', is);
        btn.setAttribute('aria-selected', is ? 'true' : 'false');
      });
      // move focus to first interactive element in section for accessibility
      const sec = document.getElementById(name);
      if (sec) {
        const focusable = sec.querySelector('input, button, a, textarea, select');
        if (focusable) focusable.focus();
      }
    }

    menuButtons.forEach(btn => {
      btn.addEventListener('click', () => {
        const sec = btn.dataset.section;
        if (sec) showSection(sec);
      });
    });

    // Toast
    let toastTimer = null;
    function showToast(message, type='success', duration=3000) {
      toastEl.textContent = message;
      toastEl.className = 'toast show ' + (type === 'error' ? 'error' : 'success');
      if (toastTimer) clearTimeout(toastTimer);
      toastTimer = setTimeout(() => { toastEl.className = 'toast'; }, duration);
    }

    // Profile save
    function saveProfile(e) {
      e.preventDefault();
      const data = {
        firstName: document.getElementById('firstName').value.trim(),
        lastName: document.getElementById('lastName').value.trim(),
        email: document.getElementById('email').value.trim(),
        phone: document.getElementById('phone').value.trim(),
        address: document.getElementById('address').value.trim()
      };
      localStorage.setItem('profile', JSON.stringify(data));
      showToast('Profile saved');
    }

    // Settings save
    function saveSettings(e) {
      e.preventDefault();
      const pw = document.getElementById('password').value;
      const cpw = document.getElementById('confirmPassword').value;
      if (pw || cpw) {
        if (pw !== cpw) { showToast('Passwords do not match', 'error'); return; }
        // In production: send to server
      }
      const newsletter = document.getElementById('newsletter').value;
      localStorage.setItem('settings', JSON.stringify({newsletter}));
      document.getElementById('password').value = '';
      document.getElementById('confirmPassword').value = '';
      showToast('Settings saved');
    }

    // Sign out
    function signOut() {
      // clear session in production. For now show toast then redirect
      showToast('Signed out', 'success');
      setTimeout(() => { window.location.href = 'index.html'; }, 900);
    }

    // Wishlist actions
    function removeWishlistItem(id) {
      const el = document.querySelector('.wishlist-item[data-id="'+id+'"]');
      if (!el) return;
      el.remove();
      showToast('Removed from wishlist');
      checkWishlistEmpty();
    }
    function addToCartFromWishlist(id) {
      cartCount++;
      localStorage.setItem('cartCount', cartCount);
      cartCountEl.textContent = cartCount;
      cartCountEl.style.display = 'inline-block';
      showToast('Item added to cart');
      removeWishlistItem(id);
    }
    function checkWishlistEmpty() {
      const grid = document.getElementById('wishlistGrid');
      const empty = document.getElementById('wishlistEmpty');
      if (!grid || !empty) return;
      if (grid.children.length === 0) {
        grid.style.display = 'none'; empty.style.display = 'block';
      }
    }

    // Init: restore profile, settings
    document.addEventListener('DOMContentLoaded', () => {
      // Restore profile values
      try {
        const p = JSON.parse(localStorage.getItem('profile') || '{}');
        if (p.firstName) document.getElementById('firstName').value = p.firstName;
        if (p.lastName) document.getElementById('lastName').value = p.lastName;
        if (p.email) document.getElementById('email').value = p.email;
        if (p.phone) document.getElementById('phone').value = p.phone;
        if (p.address) document.getElementById('address').value = p.address;
      } catch (err) { /* ignore parse errors */ }

      // restore settings
      try {
        const s = JSON.parse(localStorage.getItem('settings') || '{}');
               if (s.newsletter) document.getElementById('newsletter').value = s.newsletter;
      } catch (err) { /* ignore */ }

      // Ensure wishlist empty state if needed
      checkWishlistEmpty();

      // Close shop dropdown if open on navigation focusouts
      document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape') {
          toggleShopDropdown(false);
          if (mobileBackdrop.classList.contains('active')) closeMobile();
        }
      });
    });

    // Expose some functions for inline handlers
    window.saveProfile = saveProfile;
    window.saveSettings = saveSettings;
    window.signOut = signOut;
    window.removeWishlistItem = removeWishlistItem;
    window.addToCartFromWishlist = addToCartFromWishlist;

  </script>
</body>
</html>



