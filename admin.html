<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - Trendora</title>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700;800;900&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Remix Icon -->
    <link href="https://cdn.jsdelivr.net/npm/remixicon@4.0.0/fonts/remixicon.css" rel="stylesheet">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: #f3f4f6;
            color: #333;
        }

        .dashboard {
            display: flex;
            min-height: 100vh;
        }

        /* Sidebar */
        .sidebar {
            width: 260px;
            background: #1f2937;
            color: white;
            padding: 20px 0;
            position: fixed;
            height: 100vh;
            overflow-y: auto;
            transition: width 0.3s;
            z-index: 1000;
        }

        .logo {
            padding: 0 20px 20px;
            border-bottom: 1px solid #374151;
            margin-bottom: 20px;
        }

        .logo h2 {
            color: #d97706;
            font-size: 24px;
            font-family: 'Playfair Display', serif;
        }

        .logo p {
            font-size: 12px;
            color: #9ca3af;
            margin-top: 5px;
        }

        .nav-menu {
            list-style: none;
        }

        .nav-item {
            padding: 12px 20px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 12px;
            color: #d1d5db;
        }

        .nav-item:hover,
        .nav-item.active {
            background: #374151;
            color: white;
            border-left: 4px solid #d97706;
            padding-left: 16px;
        }

        .nav-item .icon {
            font-size: 20px;
            min-width: 20px;
        }

        /* Mobile Sidebar Toggle */
        .sidebar-toggle {
            display: none;
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 1001;
            background: #1f2937;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 20px;
        }

        /* Main Content */
        .main-content {
            flex: 1;
            margin-left: 260px;
            padding: 30px;
            transition: margin-left 0.3s;
        }

        .header {
            background: white;
            padding: 20px 30px;
            border-radius: 10px;
            margin-bottom: 30px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header h1 {
            font-size: 28px;
            color: #1f2937;
            font-family: 'Playfair Display', serif;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            background: #d97706;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }

        /* Stats Cards */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            transition: transform 0.3s;
        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .stat-card .icon {
            width: 50px;
            height: 50px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            margin-bottom: 15px;
        }

        .stat-card.revenue .icon {
            background: #dbeafe;
            color: #1e40af;
        }

        .stat-card.orders .icon {
            background: #fef3c7;
            color: #d97706;
        }

        .stat-card.users .icon {
            background: #d1fae5;
            color: #059669;
        }

        .stat-card.products .icon {
            background: #e9d5ff;
            color: #7c3aed;
        }

        .stat-card h3 {
            color: #6b7280;
            font-size: 14px;
            font-weight: 500;
            margin-bottom: 8px;
        }

        .stat-card .value {
            font-size: 32px;
            font-weight: bold;
            color: #1f2937;
            margin-bottom: 8px;
        }

        .stat-card .change {
            font-size: 13px;
            color: #059669;
        }

        .stat-card .change.negative {
            color: #dc2626;
        }

        /* Content Sections */
        .content-section {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            margin-bottom: 30px;
            display: none;
        }

        .content-section.active {
            display: block;
            animation: fadeIn 0.3s;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid #f3f4f6;
        }

        .section-header h2 {
            font-size: 22px;
            color: #1f2937;
            font-family: 'Playfair Display', serif;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s;
            font-family: inherit;
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .btn-primary {
            background: #d97706;
            color: white;
        }

        .btn-primary:hover:not(:disabled) {
            background: #b45309;
        }

        .btn-secondary {
            background: #e5e7eb;
            color: #374151;
        }

        .btn-secondary:hover {
            background: #d1d5db;
        }

        .btn-danger {
            background: #dc2626;
            color: white;
        }

        .btn-danger:hover {
            background: #b91c1c;
        }

        .btn-success {
            background: #059669;
            color: white;
        }

        .btn-success:hover {
            background: #047857;
        }

        /* Form Styles */
        .form-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-bottom: 20px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-group.full-width {
            grid-column: 1 / -1;
        }

        .form-group label {
            margin-bottom: 8px;
            font-weight: 500;
            color: #374151;
            font-size: 14px;
        }

        .form-group label .required {
            color: #dc2626;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            padding: 12px;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            font-size: 15px;
            font-family: inherit;
            transition: border-color 0.3s;
        }

        .form-group textarea {
            resize: vertical;
            min-height: 100px;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #d97706;
        }

        .form-group .error {
            color: #dc2626;
            font-size: 12px;
            margin-top: 5px;
        }

        .image-upload {
            border: 2px dashed #d1d5db;
            padding: 40px;
            text-align: center;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .image-upload:hover {
            border-color: #d97706;
            background: #fef3c7;
        }

        .image-upload input[type="file"] {
            display: none;
        }

        .image-preview {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-top: 15px;
        }

        .image-preview-item {
            position: relative;
        }

        .image-preview img {
            width: 100px;
            height: 100px;
            object-fit: cover;
            border-radius: 6px;
            border: 2px solid #e5e7eb;
        }

        .remove-image {
            position: absolute;
            top: -8px;
            right: -8px;
            background: #dc2626;
            color: white;
            border: none;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            cursor: pointer;
            font-size: 14px;
        }

        /* Table Styles */
        .table-container {
            overflow-x: auto;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        table thead {
            background: #f9fafb;
        }

        table th {
            padding: 15px;
            text-align: left;
            font-weight: 600;
            color: #374151;
            font-size: 13px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        table td {
            padding: 15px;
            border-bottom: 1px solid #f3f4f6;
            color: #6b7280;
        }

        table tbody tr:hover {
            background: #f9fafb;
        }

        .product-cell {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .product-image {
            width: 50px;
            height: 50px;
            object-fit: cover;
            border-radius: 6px;
            background: #f3f4f6;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            flex-shrink: 0;
        }

        .status-badge {
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 500;
            display: inline-block;
        }

        .status-badge.active {
            background: #d1fae5;
            color: #059669;
        }

        .status-badge.inactive {
            background: #fee2e2;
            color: #dc2626;
        }

        .status-badge.pending {
            background: #fef3c7;
            color: #d97706;
        }

        .status-badge.processing {
            background: #dbeafe;
            color: #1e40af;
        }

        .status-badge.completed {
            background: #d1fae5;
            color: #059669;
        }

        .status-badge.cancelled {
            background: #fee2e2;
            color: #dc2626;
        }

        .action-buttons {
            display: flex;
            gap: 8px;
        }

        .action-btn {
            padding: 6px 12px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 13px;
            transition: all 0.3s;
        }

        .action-btn.edit {
            background: #dbeafe;
            color: #1e40af;
        }

        .action-btn.edit:hover {
            background: #bfdbfe;
        }

        .action-btn.delete {
            background: #fee2e2;
            color: #dc2626;
        }

        .action-btn.delete:hover {
            background: #fecaca;
        }

        .action-btn.view {
            background: #e9d5ff;
            color: #7c3aed;
        }

        .action-btn.view:hover {
            background: #ddd6fe;
        }

        /* Search and Filter */
        .controls {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .search-box {
            flex: 1;
            min-width: 250px;
        }

        .search-box input {
            width: 100%;
            padding: 10px 15px;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            font-size: 14px;
            font-family: inherit;
        }

        .search-box input:focus {
            outline: none;
            border-color: #d97706;
        }

        .filter-select {
            padding: 10px 15px;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            font-size: 14px;
            cursor: pointer;
            font-family: inherit;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            padding: 30px;
            border-radius: 10px;
            max-width: 600px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .modal-header h3 {
            font-size: 20px;
            font-family: 'Playfair Display', serif;
        }

        .close-modal {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #6b7280;
        }

        .close-modal:hover {
            color: #1f2937;
        }

        .analytics-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-top: 20px;
        }

        .analytics-card {
            background: #f9fafb;
            padding: 20px;
            border-radius: 8px;
        }

        .analytics-card h4 {
            color: #374151;
            margin-bottom: 15px;
            font-size: 16px;
        }

        .metric-item {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid #e5e7eb;
        }

        .metric-item:last-child {
            border-bottom: none;
        }

        .metric-label {
            color: #6b7280;
            font-size: 14px;
        }

        .metric-value {
            font-weight: 600;
            color: #1f2937;
        }

        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #9ca3af;
        }

        .empty-state-icon {
            font-size: 64px;
            margin-bottom: 20px;
        }

        .empty-state h3 {
            font-size: 20px;
            color: #6b7280;
            margin-bottom: 10px;
        }

        /* Toast Notification */
        .toast {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            background: #1f2937;
            color: white;
            padding: 1rem 1.5rem;
            border-radius: 6px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.3);
            transform: translateX(400px);
            transition: transform 0.3s;
            z-index: 3000;
            display: none;
        }
        
        .toast.show {
            transform: translateX(0);
            display: block;
        }
        
        .toast.success {
            background: #059669;
        }
        
        .toast.error {
            background: #dc2626;
        }

        /* Loading Spinner */
        .loading-spinner {
            border: 3px solid #f3f4f6;
            border-top: 3px solid #d97706;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Pagination */
        .pagination {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 20px;
        }

        .pagination button {
            padding: 8px 12px;
            border: 1px solid #d1d5db;
            background: white;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .pagination button:hover:not(:disabled) {
            background: #f3f4f6;
        }

        .pagination button.active {
            background: #d97706;
            color: white;
            border-color: #d97706;
        }

        .pagination button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Chart Container */
        .chart-container {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .chart-container h3 {
            margin-bottom: 15px;
            color: #1f2937;
        }

        /* Responsive */
        @media (max-width: 968px) {
            .sidebar {
                width: 70px;
            }

            .sidebar .logo h2 {
                font-size: 18px;
            }

            .sidebar .logo p,
            .sidebar .nav-item span:not(.icon) {
                display: none;
            }

            .sidebar .nav-item {
                justify-content: center;
            }

            .main-content {
                margin-left: 70px;
            }

            .form-grid {
                grid-template-columns: 1fr;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            .analytics-grid {
                grid-template-columns: 1fr;
            }

            .sidebar-toggle {
                display: block;
            }

            .sidebar {
                transform: translateX(-100%);
            }

            .sidebar.mobile-active {
                transform: translateX(0);
                width: 260px;
            }

            .main-content {
                margin-left: 0;
                padding-top: 80px;
            }
        }

        @media (max-width: 480px) {
            .main-content {
                padding: 15px;
                padding-top: 80px;
            }

            .header {
                flex-direction: column;
                gap: 15px;
                align-items: flex-start;
            }

            .controls {
                flex-direction: column;
            }

            .search-box {
                width: 100%;
            }

            .action-buttons {
                flex-direction: column;
            }

            .modal-content {
                padding: 20px;
            }

            .toast {
                right: 1rem;
                left: 1rem;
                bottom: 1rem;
            }
        }

        /* Accessibility */
        @media (prefers-reduced-motion: reduce) {
            *, *::before, *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }
        .logo-img {
  display: inline-block;
  height: 40px; / header logo height /
  width: auto;
}

.footer-logo-img {
  height: 48px; / footer logo height /
  width: auto;
}

/ Responsive tweak /
@media (max-width: 480px) {
  .logo-img { height: 32px; }
  .footer-logo-img { height: 36px; }
}
    </style>
</head>
<body>
    <!-- Mobile Sidebar Toggle -->
    <button class="sidebar-toggle" onclick="toggleSidebar()">‚ò∞</button>

    <div class="dashboard">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="logo">
                <h2>TRENDORA</h2>
                <p>Admin Panel</p>
            </div>
            <ul class="nav-menu">
                <li class="nav-item active" data-section="dashboard">
                    <span class="icon">üìä</span>
                    <span>Dashboard</span>
                </li>
                <li class="nav-item" data-section="products">
                    <span class="icon">üì¶</span>
                    <span>Products</span>
                </li>
                <li class="nav-item" data-section="orders">
                    <span class="icon">üõí</span>
                    <span>Orders</span>
                </li>
                <li class="nav-item" data-section="users">
                    <span class="icon">üë•</span>
                    <span>Users</span>
                </li>
                <li class="nav-item" data-section="analytics">
                    <span class="icon">üìà</span>
                    <span>Analytics</span>
                </li>
                <li class="nav-item" data-section="sales">
                    <span class="icon">üí∞</span>
                    <span>Sales Report</span>
                </li>
                <li class="nav-item" data-section="categories">
                    <span class="icon">üè∑Ô∏è</span>
                    <span>Categories</span>
                </li>
                <li class="nav-item" data-section="settings">
                    <span class="icon">‚öôÔ∏è</span>
                    <span>Settings</span>
                </li>
                <li class="nav-item" onclick="logout()">
                    <span class="icon">üö™</span>
                    <span>Logout</span>
                </li>
            </ul>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Header -->
            <div class="header">
                <a href="index.html" class="logo" aria-label="Trendora home">
  <img src="/trendora.jpg" alt="Trendora" class="logo-img">
</a>
                <h1>Welcome Back, Admin!</h1>
                <div class="user-info">
                    <span>ADETUTU OLUWATOBI</span>
                    <div class="user-avatar">AO</div>
                </div>
            </div>

            <!-- Dashboard Section -->
            <section class="content-section active" id="dashboard">
                <div class="stats-grid">
                    <div class="stat-card revenue">
                        <div class="icon">üíµ</div>
                        <h3>Total Revenue</h3>
                        <div class="value" id="totalRevenue">$0</div>
                        <div class="change">‚Üë 12.5% from last month</div>
                    </div>
                    <div class="stat-card orders">
                        <div class="icon">üõçÔ∏è</div>
                        <h3>Total Orders</h3>
                        <div class="value" id="totalOrders">0</div>
                        <div class="change">‚Üë 8.3% from last month</div>
                    </div>
                    <div class="stat-card users">
                        <div class="icon">üë§</div>
                        <h3>Total Users</h3>
                        <div class="value" id="totalUsers">0</div>
                        <div class="change">‚Üë 15.2% from last month</div>
                    </div>
                    <div class="stat-card products">
                        <div class="icon">üì¶</div>
                        <h3>Total Products</h3>
                        <div class="value" id="totalProducts">0</div>
                        <div class="change">‚Üë 5.1% from last month</div>
                    </div>
                </div>

                <!-- Recent Orders -->
                <div class="chart-container">
                    <h3>Recent Orders</h3>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Order ID</th>
                                    <th>Customer</th>
                                    <th>Product</th>
                                    <th>Amount</th>
                                    <th>Status</th>
                                    <th>Date</th>
                                </tr>
                            </thead>
                            <tbody id="recentOrdersTable">
                                <tr>
                                    <td colspan="6" class="empty-state">
                                        <div class="empty-state-icon">üì¶</div>
                                        <h3>No orders yet</h3>
                                        <p>Orders will appear here once customers start purchasing</p>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- Products Section -->
            <section class="content-section" id="products">
                <div class="section-header">
                    <h2>Products Management</h2>
                    <button class="btn btn-primary" onclick="openAddProductModal()">+ Add New Product</button>
                </div>

                <div class="controls">
                    <div class="search-box">
                        <input type="text" placeholder="Search products..." id="productSearch" oninput="searchProducts()">
                    </div>
                    <select class="filter-select" id="productCategoryFilter" onchange="filterProducts()">
                        <option value="">All Categories</option>
                        <option value="women">Women</option>
                        <option value="men">Men</option>
                        <option value="accessories">Accessories</option>
                        <option value="shoes">Shoes</option>
                    </select>
                    <select class="filter-select" id="productStatusFilter" onchange="filterProducts()">
                        <option value="">All Status</option>
                        <option value="active">Active</option>
                        <option value="inactive">Inactive</option>
                    </select>
                </div>

                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Product</th>
                                <th>Category</th>
                                <th>Price</th>
                                <th>Stock</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="productsTable">
                            <tr>
                                <td colspan="6" class="empty-state">
                                    <div class="empty-state-icon">üì¶</div>
                                    <h3>No products yet</h3>
                                    <p>Click "Add New Product" to get started</p>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="pagination" id="productsPagination"></div>
            </section>

            <!-- Orders Section -->
            <section class="content-section" id="orders">
                <div class="section-header">
                    <h2>Orders Management</h2>
                    <button class="btn btn-secondary" onclick="exportOrders()">üì• Export Orders</button>
                </div>

                <div class="controls">
                    <div class="search-box">
                        <input type="text" placeholder="Search orders..." id="orderSearch" oninput="searchOrders()">
                    </div>
                    <select class="filter-select" id="orderStatusFilter" onchange="filterOrders()">
                        <option value="">All Status</option>
                        <option value="pending">Pending</option>
                        <option value="processing">Processing</option>
                        <option value="completed">Completed</option>
                        <option value="cancelled">Cancelled</option>
                    </select>
                    <input type="date" class="filter-select" id="orderDateFilter" onchange="filterOrders()">
                </div>

                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Order ID</th>
                                <th>Customer</th>
                                <th>Products</th>
                                <th>Total</th>
                                <th>Status</th>
                                <th>Date</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="ordersTable">
                            <tr>
                                <td colspan="7" class="empty-state">
                                    <div class="empty-state-icon">üõí</div>
                                    <h3>No orders yet</h3>
                                    <p>Orders will appear here once customers make purchases</p>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="pagination" id="ordersPagination"></div>
            </section>

            <!-- Users Section -->
            <section class="content-section" id="users">
                <div class="section-header">
                    <h2>Users Management</h2>
                    <button class="btn btn-primary" onclick="openAddUserModal()">+ Add New User</button>
                </div>

                <div class="controls">
                    <div class="search-box">
                        <input type="text" placeholder="Search users..." id="userSearch" oninput="searchUsers()">
                    </div>
                    <select class="filter-select" id="userRoleFilter" onchange="filterUsers()">
                        <option value="">All Roles</option>
                        <option value="customer">Customer</option>
                        <option value="admin">Admin</option>
                    </select>
                </div>

                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>User</th>
                                <th>Email</th>
                                <th>Role</th>
                                <th>Orders</th>
                                <th>Joined</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="usersTable">
                            <tr>
                                <td colspan="6" class="empty-state">
                                    <div class="empty-state-icon">üë•</div>
                                    <h3>No users yet</h3>
                                    <p>Users will appear here after registration</p>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="pagination" id="usersPagination"></div>
            </section>

            <!-- Analytics Section -->
            <section class="content-section" id="analytics">
                <div class="section-header">
                    <h2>Analytics & Reports</h2>
                    <button class="btn btn-secondary" onclick="refreshAnalytics()">üîÑ Refresh</button>
                </div>

                <div class="analytics-grid">
                    <div class="analytics-card">
                        <h4>Top Selling Products</h4>
                        <div id="topProducts">
                            <div class="metric-item">
                                <span class="metric-label">No data available</span>
                            </div>
                        </div>
                    </div>

                    <div class="analytics-card">
                        <h4>Revenue by Category</h4>
                        <div id="revenueByCategory">
                            <div class="metric-item">
                                <span class="metric-label">No data available</span>
                            </div>
                        </div>
                    </div>

                    <div class="analytics-card">
                        <h4>Customer Statistics</h4>
                        <div id="customerStats">
                            <div class="metric-item">
                                <span class="metric-label">New Customers</span>
                                <span class="metric-value" id="newCustomers">0</span>
                            </div>
                            <div class="metric-item">
                                <span class="metric-label">Returning Customers</span>
                                <span class="metric-value" id="returningCustomers">0</span>
                            </div>
                            <div class="metric-item">
                                <span class="metric-label">Customer Retention</span>
                                <span class="metric-value" id="customerRetention">0%</span>
                            </div>
                        </div>
                    </div>

                    <div class="analytics-card">
                        <h4>Order Statistics</h4>
                        <div id="orderStats">
                            <div class="metric-item">
                                <span class="metric-label">Average Order Value</span>
                                <span class="metric-value" id="avgOrderValue">$0</span>
                            </div>
                            <div class="metric-item">
                                <span class="metric-label">Completed Orders</span>
                                <span class="metric-value" id="completedOrders">0</span>
                            </div>
                            <div class="metric-item">
                                <span class="metric-label">Pending Orders</span>
                                <span class="metric-value" id="pendingOrders">0</span>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Sales Report Section -->
            <section class="content-section" id="sales">
                <div class="section-header">
                    <h2>Sales Report</h2>
                    <div style="display: flex; gap: 10px;">
                        <select class="filter-select" id="salesPeriod" onchange="updateSalesReport()">
                            <option value="today">Today</option>
                            <option value="week">This Week</option>
                            <option value="month" selected>This Month</option>
                            <option value="year">This Year</option>
                        </select>
                        <button class="btn btn-secondary" onclick="exportSalesReport()">üì• Export Report</button>
                    </div>
                </div>

                <div class="stats-grid">
                    <div class="stat-card revenue">
                        <h3>Total Sales</h3>
                        <div class="value" id="salesRevenue">$0</div>
                        <div class="change">This period</div>
                    </div>
                    <div class="stat-card orders">
                        <h3>Orders Completed</h3>
                        <div class="value" id="salesOrders">0</div>
                        <div class="change">This period</div>
                    </div>
                    <div class="stat-card users">
                        <h3>Items Sold</h3>
                        <div class="value" id="salesItems">0</div>
                        <div class="change">This period</div>
                    </div>
                    <div class="stat-card products">
                        <h3>Avg. Order Value</h3>
                        <div class="value" id="salesAvgOrder">$0</div>
                        <div class="change">This period</div>
                    </div>
                </div>

                <div class="chart-container">
                    <h3>Sales Breakdown</h3>
                    <div id="salesBreakdown" class="empty-state">
                        <div class="empty-state-icon">üìä</div>
                        <h3>No sales data available</h3>
                        <p>Sales data will appear here once orders are completed</p>
                    </div>
                </div>
            </section>

            <!-- Categories Section -->
            <section class="content-section" id="categories">
                <div class="section-header">
                    <h2>Categories Management</h2>
                    <button class="btn btn-primary" onclick="openAddCategoryModal()">+ Add Category</button>
                </div>

                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Category</th>
                                <th>Products</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="categoriesTable">
                            <tr>
                                <td>Women</td>
                                <td id="womenCount">0</td>
                                <td><span class="status-badge active">Active</span></td>
                                <td>
                                    <div class="action-buttons">
                                        <button class="action-btn edit" onclick="editCategory('women')">Edit</button>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>Men</td>
                                <td id="menCount">0</td>
                                <td><span class="status-badge active">Active</span></td>
                                <td>
                                    <div class="action-buttons">
                                        <button class="action-btn edit" onclick="editCategory('men')">Edit</button>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>Accessories</td>
                                <td id="accessoriesCount">0</td>
                                <td><span class="status-badge active">Active</span></td>
                                <td>
                                    <div class="action-buttons">
                                        <button class="action-btn edit" onclick="editCategory('accessories')">Edit</button>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>Shoes</td>
                                <td id="shoesCount">0</td>
                                <td><span class="status-badge active">Active</span></td>
                                <td>
                                    <div class="action-buttons">
                                        <button class="action-btn edit" onclick="editCategory('shoes')">Edit</button>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Settings Section -->
            <section class="content-section" id="settings">
                <div class="section-header">
                    <h2>Settings</h2>
                </div>

                <div class="form-grid">
                    <div class="form-group">
                        <label>Store Name</label>
                        <input type="text" value="Trendora" id="storeName">
                    </div>

                    <div class="form-group">
                        <label>Store Email</label>
                        <input type="email" value="info@trendora.com" id="storeEmail">
                    </div>

                    <div class="form-group">
                        <label>Contact Phone</label>
                        <input type="tel" value="+1 234 567 8900" id="storePhone">
                    </div>

                    <div class="form-group">
                        <label>Currency</label>
                        <select id="storeCurrency">
                            <option value="USD" selected>USD ($)</option>
                            <option value="EUR">EUR (‚Ç¨)</option>
                            <option value="GBP">GBP (¬£)</option>
                            <option value="NGN">NGN (‚Ç¶)</option>
                        </select>
                    </div>

                    <div class="form-group full-width">
                        <label>Store Address</label>
                        <textarea id="storeAddress" rows="3">123 Fashion Street, Style City, ST 12345</textarea>
                    </div>

                    <div class="form-group full-width">
                        <label>About Store</label>
                        <textarea id="storeAbout" rows="4">Your choice, your style, your identity. Discover curated fashion trends that define who you are.</textarea>
                    </div>
                </div>

                <div style="margin-top: 20px;">
                    <button class="btn btn-primary" onclick="saveSettings()">Save Settings</button>
                    <button class="btn btn-secondary" onclick="resetSettings()">Reset</button>
                </div>
            </section>
        </main>
    </div>

    <!-- Add Product Modal -->
    <div class="modal" id="productModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="productModalTitle">Add New Product</h3>
                <button class="close-modal" onclick="closeProductModal()">√ó</button>
            </div>

            <form id="productForm" onsubmit="saveProduct(event)">
                <div class="form-grid">
                    <div class="form-group full-width">
                        <label>Product Name <span class="required">*</span></label>
                        <input type="text" id="productName" required>
                    </div>

                    <div class="form-group">
                        <label>Category <span class="required">*</span></label>
                        <select id="productCategory" required>
                            <option value="">Select Category</option>
                            <option value="women">Women</option>
                            <option value="men">Men</option>
                            <option value="accessories">Accessories</option>
                            <option value="shoes">Shoes</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Price <span class="required">*</span></label>
                        <input type="number" id="productPrice" step="0.01" min="0" required>
                    </div>

                    <div class="form-group">
                        <label>Stock Quantity <span class="required">*</span></label>
                        <input type="number" id="productStock" min="0" required>
                    </div>

                    <div class="form-group">
                        <label>Status</label>
                        <select id="productStatus">
                            <option value="active">Active</option>
                            <option value="inactive">Inactive</option>
                        </select>
                    </div>

                    <div class="form-group full-width">
                        <label>Description</label>
                        <textarea id="productDescription" rows="4"></textarea>
                    </div>

                    <div class="form-group full-width">
                        <label>Product Image</label>
                        <div class="image-upload" onclick="document.getElementById('productImage').click()">
                            <input type="file" id="productImage" accept="image/*" onchange="previewProductImage(event)">
                            <p>üì∑ Click to upload image</p>
                        </div>
                        <div class="image-preview" id="productImagePreview"></div>
                    </div>
                </div>

                <div style="margin-top: 20px; display: flex; gap: 10px;">
                    <button type="submit" class="btn btn-primary">Save Product</button>
                    <button type="button" class="btn btn-secondary" onclick="closeProductModal()">Cancel</button>

                </div>
            </form>
        </div>
    </div>

    <!-- Add User Modal -->
    <div class="modal" id="userModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="userModalTitle">Add New User</h3>
                <button class="close-modal" onclick="closeUserModal()">√ó</button>
            </div>

            <form id="userForm" onsubmit="saveUser(event)">
                <div class="form-grid">
                    <div class="form-group full-width">
                        <label>Full Name <span class="required">*</span></label>
                        <input type="text" id="userFullName" required>
                    </div>

                    <div class="form-group">
                        <label>Email <span class="required">*</span></label>
                        <input type="email" id="userEmail" required>
                    </div>

                    <div class="form-group">
                        <label>Role <span class="required">*</span></label>
                        <select id="userRole" required>
                            <option value="customer">Customer</option>
                            <option value="admin">Admin</option>
                        </select>
                    </div>

                    <div class="form-group full-width">
                        <label>Password <span class="required">*</span></label>
                        <input type="password" id="userPassword" required>
                    </div>
                </div>

                <div style="margin-top: 20px; display: flex; gap: 10px;">
                    <button type="submit" class="btn btn-primary">Save User</button>
                    <button type="button" class="btn btn-secondary" onclick="closeUserModal()">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Category Modal -->
    <div class="modal" id="categoryModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="categoryModalTitle">Add Category</h3>
                <button class="close-modal" onclick="closeCategoryModal()">√ó</button>
            </div>

            <form id="categoryForm" onsubmit="saveCategory(event)">
                <div class="form-grid">
                    <div class="form-group full-width">
                        <label>Category Name <span class="required">*</span></label>
                        <input type="text" id="categoryName" required>
                    </div>

                    <div class="form-group full-width">
                        <label>Description</label>
                        <textarea id="categoryDescription" rows="3"></textarea>
                    </div>
                </div>

                <div style="margin-top: 20px; display: flex; gap: 10px;">
                    <button type="submit" class="btn btn-primary">Save Category</button>
                    <button type="button" class="btn btn-secondary" onclick="closeCategoryModal()">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Toast -->
    <div id="toast" class="toast" role="alert" aria-live="polite"></div>

    <script>
        // Simple in-memory store (replace with API calls)
        const store = {
            products: [],
            orders: [],
            users: [],
            categories: ['women', 'men', 'accessories', 'shoes'],
            settings: {
                storeName: document.getElementById('storeName')?.value || 'Trendora',
                storeEmail: document.getElementById('storeEmail')?.value || 'info@trendora.com',
                storePhone: document.getElementById('storePhone')?.value || '+1 234 567 8900',
                storeCurrency: document.getElementById('storeCurrency')?.value || 'USD',
                storeAddress: document.getElementById('storeAddress')?.value || '',
                storeAbout: document.getElementById('storeAbout')?.value || ''
            }
        };

        // Utility: show toast
        function showToast(message, type = 'success') {
            const toast = document.getElementById('toast');
            if (!toast) return;
            toast.textContent = message;
            toast.className = `toast ${type} show`;
            setTimeout(() => {
                toast.className = 'toast';
            }, 3000);
        }

        // Sidebar navigation
        document.querySelectorAll('.nav-item[data-section]').forEach(item => {
            item.addEventListener('click', () => {
                document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
                item.classList.add('active');
                const section = item.getAttribute('data-section');
                document.querySelectorAll('.content-section').forEach(sec => sec.classList.remove('active'));
                const el = document.getElementById(section);
                if (el) el.classList.add('active');
                // Close mobile sidebar if open
                document.getElementById('sidebar')?.classList.remove('mobile-active');
            });
        });

        // Mobile sidebar toggle
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            sidebar.classList.toggle('mobile-active');
        }

        // Logout placeholder
        function logout() {
            showToast('Logged out', 'success');
            // Implement real logout via auth.js or API
        }

        // Products: Add/Edit/Delete
        function openAddProductModal() {
            document.getElementById('productModalTitle').textContent = 'Add New Product';
            document.getElementById('productForm').reset();
            document.getElementById('productImagePreview').innerHTML = '';
            document.getElementById('productModal').classList.add('active');
        }

        function closeProductModal() {
            document.getElementById('productModal').classList.remove('active');
        }

        function previewProductImage(event) {
            const preview = document.getElementById('productImagePreview');
            preview.innerHTML = '';
            const files = event.target.files;
            if (!files || !files.length) return;
            Array.from(files).forEach(file => {
                const reader = new FileReader();
                reader.onload = () => {
                    const wrapper = document.createElement('div');
                    wrapper.className = 'image-preview-item';
                    const img = document.createElement('img');
                    img.src = reader.result;
                    const btn = document.createElement('button');
                    btn.className = 'remove-image';
                    btn.type = 'button';
                    btn.textContent = '√ó';
                    btn.onclick = () => wrapper.remove();
                    wrapper.appendChild(img);
                    wrapper.appendChild(btn);
                    preview.appendChild(wrapper);
                };
                reader.readAsDataURL(file);
            });
        }

        function saveProduct(e) {
            e.preventDefault();
            const name = document.getElementById('productName').value.trim();
            const category = document.getElementById('productCategory').value;
            const price = parseFloat(document.getElementById('productPrice').value) || 0;
            const stock = parseInt(document.getElementById('productStock').value, 10) || 0;
            const status = document.getElementById('productStatus').value;
            const description = document.getElementById('productDescription').value.trim();

            if (!name || !category) {
                showToast('Please provide product name and category', 'error');
                return;
            }

            const id = Date.now().toString(36);
            const images = Array.from(document.querySelectorAll('#productImagePreview img')).map(img => img.src);

            const product = { id, name, category, price, stock, status, description, images };
            store.products.push(product);
            showToast('Product saved', 'success');
            closeProductModal();
            renderProducts();
            updateStats();
        }

        function renderProducts(page = 1, perPage = 10) {
            const tbody = document.getElementById('productsTable');
            tbody.innerHTML = '';

            const search = document.getElementById('productSearch').value.trim().toLowerCase();
            const categoryFilter = document.getElementById('productCategoryFilter').value;
            const statusFilter = document.getElementById('productStatusFilter').value;

            let filtered = store.products.filter(p => {
                if (search && !p.name.toLowerCase().includes(search)) return false;
                if (categoryFilter && p.category !== categoryFilter) return false;
                if (statusFilter && p.status !== statusFilter) return false;
                return true;
            });

            if (!filtered.length) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="6" class="empty-state">
                            <div class="empty-state-icon">üì¶</div>
                            <h3>No products found</h3>
                            <p>Try adjusting your search or add a new product.</p>
                        </td>
                    </tr>
                `;
                document.getElementById('productsPagination').innerHTML = '';
                return;
            }

            const total = filtered.length;
            const pages = Math.ceil(total / perPage);
            const start = (page - 1) * perPage;
            const end = start + perPage;
            const pageItems = filtered.slice(start, end);

            pageItems.forEach(p => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>
                        <div class="product-cell">
                            <div class="product-image">${p.images?.[0] ? `<img src="${p.images[0]}" alt="${p.name}" style="width:50px;height:50px;border-radius:6px;object-fit:cover;">` : 'üõçÔ∏è'}</div>
                            <div>
                                <div style="font-weight:600;color:#1f2937">${p.name}</div>
                                <div style="font-size:12px;color:#6b7280">${p.description || ''}</div>
                            </div>
                        </div>
                    </td>
                    <td>${p.category}</td>
                    <td>$${p.price.toFixed(2)}</td>
                    <td>${p.stock}</td>
                    <td><span class="status-badge ${p.status === 'active' ? 'active' : 'inactive'}">${p.status}</span></td>
                    <td>
                        <div class="action-buttons">
                            <button class="action-btn view" onclick="viewProduct('${p.id}')">View</button>
                            <button class="action-btn edit" onclick="editProduct('${p.id}')">Edit</button>
                            <button class="action-btn delete" onclick="deleteProduct('${p.id}')">Delete</button>
                        </div>
                    </td>
                `;
                tbody.appendChild(tr);
            });

            // Pagination
            const pagination = document.getElementById('productsPagination');
            pagination.innerHTML = '';
            for (let i = 1; i <= pages; i++) {
                const btn = document.createElement('button');
                btn.textContent = i;
                if (i === page) btn.className = 'active';
                btn.onclick = () => renderProducts(i, perPage);
                pagination.appendChild(btn);
            }
        }

        function viewProduct(id) {
            const p = store.products.find(x => x.id === id);
            if (!p) return showToast('Product not found', 'error');
            // Simple view modal reuse product modal for now
            document.getElementById('productModalTitle').textContent = `View: ${p.name}`;
            document.getElementById('productName').value = p.name;
            document.getElementById('productCategory').value = p.category;
            document.getElementById('productPrice').value = p.price;
            document.getElementById('productStock').value = p.stock;
            document.getElementById('productStatus').value = p.status;
            document.getElementById('productDescription').value = p.description;
            const preview = document.getElementById('productImagePreview');
            preview.innerHTML = '';
            (p.images || []).forEach(src => {
                const wrapper = document.createElement('div');
                wrapper.className = 'image-preview-item';
                const img = document.createElement('img');
                img.src = src;
                wrapper.appendChild(img);
                preview.appendChild(wrapper);
            });
            document.getElementById('productModal').classList.add('active');
        }

        function editProduct(id) {
            const p = store.products.find(x => x.id === id);
            if (!p) return showToast('Product not found', 'error');
            document.getElementById('productModalTitle').textContent = 'Edit Product';
            document.getElementById('productName').value = p.name;
            document.getElementById('productCategory').value = p.category;
            document.getElementById('productPrice').value = p.price;
            document.getElementById('productStock').value = p.stock;
            document.getElementById('productStatus').value = p.status;
            document.getElementById('productDescription').value = p.description;
            const preview = document.getElementById('productImagePreview');
            preview.innerHTML = '';
            (p.images || []).forEach(src => {
                const wrapper = document.createElement('div');
                wrapper.className = 'image-preview-item';
                const img = document.createElement('img');
                img.src = src;
                const btn = document.createElement('button');
                btn.className = 'remove-image';
                btn.type = 'button';
                btn.textContent = '√ó';
                btn.onclick = () => wrapper.remove();
                wrapper.appendChild(img);
                wrapper.appendChild(btn);
                preview.appendChild(wrapper);
            });
            // On save, replace product instead of push
            document.getElementById('productForm').onsubmit = function(ev) {
                ev.preventDefault();
                const name = document.getElementById('productName').value.trim();
                const category = document.getElementById('productCategory').value;
                const price = parseFloat(document.getElementById('productPrice').value) || 0;
                const stock = parseInt(document.getElementById('productStock').value, 10) || 0;
                const status = document.getElementById('productStatus').value;
                const description = document.getElementById('productDescription').value.trim();
                const images = Array.from(document.querySelectorAll('#productImagePreview img')).map(img => img.src);
                p.name = name; p.category = category; p.price = price; p.stock = stock; p.status = status; p.description = description; p.images = images;
                showToast('Product updated', 'success');
                document.getElementById('productForm').onsubmit = saveProduct;
                closeProductModal();
                renderProducts();
                updateStats();
            };
            document.getElementById('productModal').classList.add('active');
        }

        function deleteProduct(id) {
            if (!confirm('Are you sure you want to delete this product?')) return;
            store.products = store.products.filter(p => p.id !== id);
            showToast('Product deleted', 'success');
            renderProducts();
            updateStats();
        }

        function searchProducts() {
            renderProducts();
        }

        function filterProducts() {
            renderProducts();
        }

        // Orders: basic placeholders (extend with API integration)
        function exportOrders() {
            showToast('Exporting orders...', 'success');
            // Implement CSV export
        }

        function renderOrders(page = 1, perPage = 10) {
            const tbody = document.getElementById('ordersTable');
            tbody.innerHTML = '';
            if (!store.orders.length) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="7" class="empty-state">
                            <div class="empty-state-icon">üõí</div>
                            <h3>No orders yet</h3>
                            <p>Orders will appear here once customers make purchases</p>
                        </td>
                    </tr>
                `;
                document.getElementById('ordersPagination').innerHTML = '';
                return;
            }

            const total = store.orders.length;
            const pages = Math.ceil(total / perPage);
            const start = (page - 1) * perPage;
            const pageItems = store.orders.slice(start, start + perPage);

            pageItems.forEach(o => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>${o.id}</td>
                    <td>${o.customerName}</td>
                    <td>${o.items.map(i => i.name).join(', ')}</td>
                    <td>$${o.total.toFixed(2)}</td>
                    <td><span class="status-badge ${o.status}">${o.status}</span></td>
                    <td>${new Date(o.date).toLocaleString()}</td>
                    <td>
                        <div class="action-buttons">
                            <button class="action-btn view" onclick="viewOrder('${o.id}')">View</button>
                            <button class="action-btn edit" onclick="updateOrderStatusPrompt('${o.id}')">Update</button>
                            <button class="action-btn delete" onclick="deleteOrder('${o.id}')">Delete</button>
                        </div>
                    </td>
                `;
                tbody.appendChild(tr);
            });

            // Pagination
            const pagination = document.getElementById('ordersPagination');
            pagination.innerHTML = '';
            for (let i = 1; i <= pages; i++) {
                const btn = document.createElement('button');
                btn.textContent = i;
                if (i === page) btn.className = 'active';
                btn.onclick = () => renderOrders(i, perPage);
                pagination.appendChild(btn);
            }
        }

        function viewOrder(id) {
            const o = store.orders.find(x => x.id === id);
            if (!o) return showToast('Order not found', 'error');
            // Show order details - reuse modal or implement dedicated modal
            alert(`Order ${o.id}\nCustomer: ${o.customerName}\nTotal: $${o.total.toFixed(2)}`);
        }

        function updateOrderStatusPrompt(id) {
            const status = prompt('Enter new status (pending, processing, completed, cancelled):');
            if (!status) return;
            updateOrderStatus(id, status);
        }

        function updateOrderStatus(id, status) {
            const o = store.orders.find(x => x.id === id);
            if (!o) return showToast('Order not found', 'error');
            o.status = status;
            showToast('Order status updated', 'success');
            renderOrders();
            updateStats();
        }

        function deleteOrder(id) {
        if (!confirm('Delete this order?')) return;
            store.orders = store.orders.filter(o => o.id !== id);
            showToast('Order deleted', 'success');
            renderOrders();
            updateStats();
        }

        function searchOrders() {
            renderOrders();
        }

        function filterOrders() {
            // For now just re-render; filtering is handled inside renderOrders if implemented
            renderOrders();
        }

        // Users
        function openAddUserModal() {
            document.getElementById('userModalTitle').textContent = 'Add New User';
            document.getElementById('userForm').reset();
            document.getElementById('userModal').classList.add('active');
        }

        function closeUserModal() {
            document.getElementById('userModal').classList.remove('active');
        }

        function saveUser(e) {
            e.preventDefault();
            const fullName = document.getElementById('userFullName').value.trim();
            const email = document.getElementById('userEmail').value.trim();
            const role = document.getElementById('userRole').value;
            const password = document.getElementById('userPassword').value;

            if (!fullName || !email || !password) {
                showToast('Please fill all required fields', 'error');
                return;
            }

            const id = Date.now().toString(36);
            store.users.push({ id, fullName, email, role, orders: 0, joined: new Date().toISOString() });
            showToast('User added', 'success');
            closeUserModal();
            renderUsers();
            updateStats();
        }

        function renderUsers(page = 1, perPage = 10) {
            const tbody = document.getElementById('usersTable');
            tbody.innerHTML = '';

            const search = document.getElementById('userSearch').value.trim().toLowerCase();
            const roleFilter = document.getElementById('userRoleFilter').value;

            let filtered = store.users.filter(u => {
                if (search && !(u.fullName.toLowerCase().includes(search) || u.email.toLowerCase().includes(search))) return false;
                if (roleFilter && u.role !== roleFilter) return false;
                return true;
            });

            if (!filtered.length) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="6" class="empty-state">
                            <div class="empty-state-icon">üë•</div>
                            <h3>No users found</h3>
                            <p>Try adjusting your search or add a new user.</p>
                        </td>
                    </tr>
                `;
                document.getElementById('usersPagination').innerHTML = '';
                return;
            }

            const total = filtered.length;
            const pages = Math.ceil(total / perPage);
            const start = (page - 1) * perPage;
            const pageItems = filtered.slice(start, start + perPage);

            pageItems.forEach(u => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>
                        <div style="display:flex;align-items:center;gap:12px">
                            <div class="product-image">${u.fullName.split(' ').map(n=>n[0]).slice(0,2).join('')}</div>
                            <div>
                                <div style="font-weight:600;color:#1f2937">${u.fullName}</div>
                            </div>
                        </div>
                    </td>
                    <td>${u.email}</td>
                    <td style="text-transform:capitalize">${u.role}</td>
                    <td>${u.orders || 0}</td>
                    <td>${new Date(u.joined).toLocaleDateString()}</td>
                    <td>
                        <div class="action-buttons">
                            <button class="action-btn view" onclick="viewUser('${u.id}')">View</button>
                            <button class="action-btn edit" onclick="editUser('${u.id}')">Edit</button>
                            <button class="action-btn delete" onclick="deleteUser('${u.id}')">Delete</button>
                        </div>
                    </td>
                `;
                tbody.appendChild(tr);
            });

            // Pagination
            const pagination = document.getElementById('usersPagination');
            pagination.innerHTML = '';
            for (let i = 1; i <= pages; i++) {
                const btn = document.createElement('button');
                btn.textContent = i;
                if (i === page) btn.className = 'active';
                btn.onclick = () => renderUsers(i, perPage);
                pagination.appendChild(btn);
            }
        }

        function viewUser(id) {
            const u = store.users.find(x => x.id === id);
            if (!u) return showToast('User not found', 'error');
            alert(`User: ${u.fullName}\nEmail: ${u.email}\nRole: ${u.role}`);
        }

        function editUser(id) {
            const u = store.users.find(x => x.id === id);
            if (!u) return showToast('User not found', 'error');
            document.getElementById('userModalTitle').textContent = 'Edit User';
            document.getElementById('userFullName').value = u.fullName;
            document.getElementById('userEmail').value = u.email;
            document.getElementById('userRole').value = u.role;
            document.getElementById('userPassword').value = '';
            document.getElementById('userModal').classList.add('active');

            document.getElementById('userForm').onsubmit = function(ev) {
                ev.preventDefault();
                u.fullName = document.getElementById('userFullName').value.trim();
                u.email = document.getElementById('userEmail').value.trim();
                u.role = document.getElementById('userRole').value;
                showToast('User updated', 'success');
                document.getElementById('userForm').onsubmit = saveUser;
                closeUserModal();
                renderUsers();
                updateStats();
            };
        }

        function deleteUser(id) {
            if (!confirm('Delete this user?')) return;
            store.users = store.users.filter(u => u.id !== id);
            showToast('User deleted', 'success');
            renderUsers();
            updateStats();
        }

        function searchUsers() {
            renderUsers();
        }

        function filterUsers() {
            renderUsers();
        }

        // Categories
        function openAddCategoryModal() {
            document.getElementById('categoryModalTitle').textContent = 'Add Category';
            document.getElementById('categoryForm').reset();
            document.getElementById('categoryModal').classList.add('active');
        }

        function closeCategoryModal() {
            document.getElementById('categoryModal').classList.remove('active');
        }

        function saveCategory(e) {
            e.preventDefault();
            const name = document.getElementById('categoryName').value.trim().toLowerCase();
            if (!name) return showToast('Please enter a category name', 'error');
            if (store.categories.includes(name)) return showToast('Category already exists', 'error');
            store.categories.push(name);
            showToast('Category added', 'success');
            closeCategoryModal();
            renderCategories();
        }

        function renderCategories() {
            const tbody = document.getElementById('categoriesTable');
            tbody.innerHTML = '';
            store.categories.forEach(cat => {
                const count = store.products.filter(p => p.category === cat).length;
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td style="text-transform:capitalize">${cat}</td>
                    <td id="${cat}Count">${count}</td>
                    <td><span class="status-badge active">Active</span></td>
                    <td>
                        <div class="action-buttons">
                            <button class="action-btn edit" onclick="editCategory('${cat}')">Edit</button>
                        </div>
                    </td>
                `;
                tbody.appendChild(tr);
            });
        }

        function editCategory(cat) {
            const newName = prompt('Edit category name', cat);
            if (!newName) return;
            const normalized = newName.trim().toLowerCase();
            if (store.categories.includes(normalized) && normalized !== cat) return showToast('Category already exists', 'error');
            // Update category in products
            store.products.forEach(p => { if (p.category === cat) p.category = normalized; });
            const idx = store.categories.indexOf(cat);
            if (idx > -1) store.categories[idx] = normalized;
            showToast('Category updated', 'success');
            renderCategories();
            renderProducts();
            updateStats();
        }

        // Settings
        function saveSettings() {
            store.settings.storeName = document.getElementById('storeName').value.trim();
            store.settings.storeEmail = document.getElementById('storeEmail').value.trim();
            store.settings.storePhone = document.getElementById('storePhone').value.trim();
            store.settings.storeCurrency = document.getElementById('storeCurrency').value;
            store.settings.storeAddress = document.getElementById('storeAddress').value.trim();
            store.settings.storeAbout = document.getElementById('storeAbout').value.trim();
            showToast('Settings saved', 'success');
        }

        function resetSettings() {
            if (!confirm('Reset settings to defaults?')) return;
            document.getElementById('storeName').value = 'Trendora';
            document.getElementById('storeEmail').value = 'info@trendora.com';
            document.getElementById('storePhone').value = '+1 234 567 8900';
            document.getElementById('storeCurrency').value = 'USD';
            document.getElementById('storeAddress').value = '123 Fashion Street, Style City, ST 12345';
            document.getElementById('storeAbout').value = 'Your choice, your style, your identity. Discover curated fashion trends that define who you are.';
            saveSettings();
        }

        // Analytics & Stats
        function updateStats() {
            const revenue = store.orders.reduce((s, o) => s + (o.total || 0), 0);
            const orders = store.orders.length;
            const users = store.users.length;
            const products = store.products.length;

            document.getElementById('totalRevenue').textContent = `$${revenue.toFixed(2)}`;
            document.getElementById('totalOrders').textContent = orders;
            document.getElementById('totalUsers').textContent = users;
            document.getElementById('totalProducts').textContent = products;

            // Update categories counts
            document.getElementById('womenCount') && (document.getElementById('womenCount').textContent = store.products.filter(p => p.category === 'women').length);
            document.getElementById('menCount') && (document.getElementById('menCount').textContent = store.products.filter(p => p.category === 'men').length);
            document.getElementById('accessoriesCount') && (document.getElementById('accessoriesCount').textContent = store.products.filter(p => p.category === 'accessories').length);
            document.getElementById('shoesCount') && (document.getElementById('shoesCount').textContent = store.products.filter(p => p.category === 'shoes').length);
        }

        function refreshAnalytics() {
            showToast('Analytics refreshed', 'success');
            // In real app, fetch analytics from API
            updateStats();
        }

        function updateSalesReport() {
            showToast('Sales report updated', 'success');
            // Update sales widgets (placeholder)
            document.getElementById('salesRevenue').textContent = '$0';
            document.getElementById('salesOrders').textContent = '0';
            document.getElementById('salesItems').textContent = '0';
            document.getElementById('salesAvgOrder').textContent = '$0';
        }

        function exportSalesReport() {
            showToast('Exporting sales report...', 'success');
        }

        // Initialization
        document.addEventListener('DOMContentLoaded', () => {
            renderProducts();
            renderOrders();
            renderUsers();
            renderCategories();
            updateStats();

            // Close modals with Esc
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape') {
                    document.querySelectorAll('.modal').forEach(m => m.classList.remove('active'));
                }
            });

            // Click outside modal to close
            document.querySelectorAll('.modal').forEach(modal => {
                modal.addEventListener('click', (e) => {
                    if (e.target === modal) modal.classList.remove('active');
                });
            });
        });
   
</script>
  

    <!-- Supabase JS -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/umd/supabase.min.js"></script>
<script>
    // ====== CONFIG - Replace placeholders with your values ======
    const SUPABASE_URL = "https://yyhdjacrehxjjydbupix.supabase.co"; // replace
    const SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inl5aGRqYWNyZWh4amp5ZGJ1cGl4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU2OTc2NzYsImV4cCI6MjA4MTI3MzY3Nn0.R4f3UBO0-8WaO5VW5_O4fxG6iOBuHBSPgUREDE1n6P4"; // replace
    const FUNCTIONS_URL = "https://yyhdjacrehxjjydbupix.functions.supabase.co/admin-create-product"; // replace
    // ===========================================================

    const supabase = supabaseJs.createClient(https://yyhdjacrehxjjydbupix.supabase.co, eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inl5aGRqYWNyZWh4amp5ZGJ1cGl4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU2OTc2NzYsImV4cCI6MjA4MTI3MzY3Nn0.R4f3UBO0-8WaO5VW5_O4fxG6iOBuHBSPgUREDE1n6P4);

    // UI elements
    const navItems = document.querySelectorAll('.nav-item[data-target]');
    const sections = document.querySelectorAll('.content-section');
    const signOutBtn = document.getElementById('signOutBtn');
    const userAvatar = document.getElementById('userAvatar');
    const userEmail = document.getElementById('userEmail');
    const userRole = document.getElementById('userRole');
    const toastEl = document.getElementById('toast');

    const openCreateModal = document.getElementById('openCreateModal');
    const createModal = document.getElementById('createModal');
    const closeCreateModal = document.getElementById('closeCreateModal');
    const createProductForm = document.getElementById('createProductForm');
    const pImage = document.getElementById('pImage');
    const imagePreview = document.getElementById('imagePreview');
    const imageUpload = document.getElementById('imageUpload');
    const submitCreate = document.getElementById('submitCreate');
    const createStatus = document.getElementById('createStatus');
    const productsTableBody = document.querySelector('#productsTable tbody');

    let selectedFile = null;
    let currentUser = null;

    // Navigation
    navItems.forEach(item => {
        item.addEventListener('click', () => {
            navItems.forEach(i => i.classList.remove('active'));
            item.classList.add('active');
            const target = item.dataset.target;
            sections.forEach(s => s.classList.remove('active'));
            document.getElementById(target).classList.add('active');
        });
    });

    // Sign out
    signOutBtn.addEventListener('click', async () => {
        await supabase.auth.signOut();
        showToast('Signed out', 'success');
        location.reload();
    });

    // Image upload UI
    imageUpload.addEventListener('click', () => pImage.click());
    pImage.addEventListener('change', handleFileSelect);
    imageUpload.addEventListener('dragover', (e) => { e.preventDefault(); imageUpload.classList.add('dragover'); });
    imageUpload.addEventListener('dragleave', () => imageUpload.classList.remove('dragover'));
    imageUpload.addEventListener('drop', (e) => {
        e.preventDefault();
        imageUpload.classList.remove('dragover');
        if (e.dataTransfer.files && e.dataTransfer.files[0]) {
            pImage.files = e.dataTransfer.files;
            handleFileSelect();
        }
    });

    function handleFileSelect() {
        imagePreview.innerHTML = '';
        const file = pImage.files[0];
        if (!file) return;
        selectedFile = file;
        const url = URL.createObjectURL(file);
        const item = document.createElement('div');
        item.className = 'image-preview-item';
        item.innerHTML = `
            <img src="${url}" alt="${file.name}" />
            <button class="remove-image" title="Remove">√ó</button>
        `;
        imagePreview.appendChild(item);
        item.querySelector('.remove-image').addEventListener('click', () => {
            selectedFile = null;
            pImage.value = '';
            imagePreview.innerHTML = '';
        });
    }

    // Modal open/close
    openCreateModal.addEventListener('click', () => {
        createModal.classList.add('active');
        createModal.setAttribute('aria-hidden', 'false');
    });
    closeCreateModal.addEventListener('click', () => {
        createModal.classList.remove('active');
        createModal.setAttribute('aria-hidden', 'true');
    });

    // Toast helper
    function showToast(msg, type = 'success') {
        toastEl.textContent = msg;
        toastEl.className = `toast show ${type === 'error' ? 'error' : 'success'}`;
        setTimeout(() => { toastEl.className = 'toast'; }, 3000);
    }

    // Initialize: check session and load products
    (async function init() {
        const { data } = await supabase.auth.getSession();
        const session = data.session;
        if (session && session.user) {
            currentUser = session.user;
            await postSignInSetup(currentUser);
        } else {
            // If not signed in, redirect to your sign-in page or show minimal info
            userEmail.textContent = 'Not signed in';
            userRole.textContent = 'Sign in to manage';
            userAvatar.textContent = 'A';
            // Optionally, open auth popup - for convenience leave as is
        }
        await loadProducts();
    })();

    // After sign-in checks
    async function postSignInSetup(user) {
        currentUser = user;
        userEmail.textContent = user.email;
        userAvatar.textContent = (user.email && user.email[0]) ? user.email[0].toUpperCase() : 'A';
        // check admin role
        const { data, error } = await supabase.from('admins').select('role').eq('user_id', user.id).single();
        if (error || !data) {
            userRole.textContent = 'No admin access';
            showToast('You are not an admin', 'error');
            // sign out to prevent accidental access
            await supabase.auth.signOut();
            setTimeout(() => location.href = '/', 1200);
            return;
        }
        userRole.textContent = data.role || 'admin';
    }

    // Create product form submit
    createProductForm.addEventListener('submit', async (e) => {
        e.preventDefault();
        submitCreate.disabled = true;
        createStatus.textContent = 'Creating...';

        try {
            const name = document.getElementById('pName').value.trim();
            const price = parseFloat(document.getElementById('pPrice').value);
            const description = document.getElementById('pDescription').value.trim();
            const category = document.getElementById('pCategory').value.trim();

            if (!name || !price) {
                showToast('Name and price are required', 'error');
                submitCreate.disabled = false;
                createStatus.textContent = '';
                return;
            }

            let imageBase64 = null;
            let imageFilename = null;
            let imageContentType = null;

            if (selectedFile) {
                imageFilename = selectedFile.name;
                imageContentType = selectedFile.type || 'image/png';
                imageBase64 = await fileToBase64(selectedFile);
                imageBase64 = imageBase64.split(',')[1]; // remove data:<type>;base64, prefix
            }

            // get access token
            const { data: sessionData } = await supabase.auth.getSession();
            const token = sessionData?.session?.access_token;
            if (!token) throw new Error('Not authenticated');

            const payload = { name, description, price, category, imageBase64, imageFilename, imageContentType };

            const res = await fetch(FUNCTIONS_URL, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${token}`
                },
                body: JSON.stringify(payload)
            });

            const json = await res.json();
            if (!res.ok) throw new Error(json?.error || JSON.stringify(json));

            showToast('Product created', 'success');
            createModal.classList.remove('active');
            createModal.setAttribute('aria-hidden', 'true');
            createProductForm.reset();
            imagePreview.innerHTML = '';
            selectedFile = null;
            createStatus.textContent = '';
            await loadProducts();
        } catch (err) {
            console.error(err);
            showToast(err.message || 'Create failed', 'error');
            createStatus.textContent = 'Error';
        } finally {
            submitCreate.disabled = false;
        }
    });

    // Convert file to base64
    function fileToBase64(file) {
        return new Promise((resolve, reject) => {
            const reader = new FileReader();
            reader.onload = () => resolve(reader.result);
            reader.onerror = (e) => reject(e);
            reader.readAsDataURL(file);
        });
    }

    // Load products from Supabase and render table
    async function loadProducts() {
        productsTableBody.innerHTML = '<tr><td colspan="5" style="text-align:center;padding:20px">Loading...</td></tr>';
        const { data, error } = await supabase.from('products').select('id, name, price, category, image_url, created_at').order('created_at', { ascending: false });
        if (error) {
            productsTableBody.innerHTML = `<tr><td colspan="5" style="text-align:center;padding:20px">Error loading products</td></tr>`;
            console.error('Load products error', error);
            return;
        }
        if (!data || !data.length) {
            productsTableBody.innerHTML = `<tr><td colspan="5" style="text-align:center;padding:20px">No products found</td></tr>`;
            return;
        }

        productsTableBody.innerHTML = data.map(p => `
            <tr>
                <td>
                    <div class="product-cell">
                        <div class="product-image">
                            ${p.image_url ? `<img src="${p.image_url}" alt="${p.name}" style="width:100%;height:100%;object-fit:cover;border-radius:6px" />` : 'üõçÔ∏è'}
                        </div>
                        <div>
                            <div style="font-weight:600;color:#111">${p.name}</div>
                            <div class="muted" style="font-size:13px">${p.category || ''}</div>
                        </div>
                    </div>
                </td>
                <td>$${Number(p.price).toFixed(2)}</td>
                <td>${p.category || '-'}</td>
                <td>${new Date(p.created_at).toLocaleString()}</td>
                <td>
                    <div class="action-buttons">
                        <button class="action-btn edit" data-id="${p.id}">Edit</button>
                        <button class="action-btn delete" data-id="${p.id}">Delete</button>
                        <button class="action-btn view" data-id="${p.id}">View</button>
                    </div>
                </td>
            </tr>
        `).join('');
        // attach action handlers
        document.querySelectorAll('.action-btn.delete').forEach(btn => {
            btn.addEventListener('click', async (e) => {
                const id = btn.dataset.id;
                if (!confirm('Delete this product?')) return;
                try {
                    // delete via client (requires RLS/policy) or call an admin function
                    const { error } = await supabase.from('products').delete().eq('id', id);
                    if (error) throw error;
                    showToast('Product deleted', 'success');
                    await loadProducts();
                } catch (err) {
                    console.error(err);
                    showToast('Delete failed', 'error');
                }
            });
        });

        document.querySelectorAll('.action-btn.edit').forEach(btn => {
            btn.addEventListener('click', async (e) => {
                const id = btn.dataset.id;
                // simple inline edit prompt (replace with modal if you want)
                const newName = prompt('New product name:');
                if (!newName) return;
                try {
                    const { error } = await supabase.from('products').update({ name: newName }).eq('id', id);
                    if (error) throw error;
                    showToast('Product updated', 'success');
                    await loadProducts();
                } catch (err) {
                    console.error(err);
                    showToast('Update failed', 'error');
                }
            });
        });

        document.querySelectorAll('.action-btn.view').forEach(btn => {
            btn.addEventListener('click', (e) => {
                const id = btn.dataset.id;
                // open product in new tab / or show modal with details
                const row = btn.closest('tr');
                const img = row.querySelector('img')?.src || '';
                const name = row.querySelector('td div div').textContent || '';
                alert(`Product: ${name}\nID: ${id}\nImage: ${img}`);
            });
        });
    }

    // Simple polling for auth changes to update UI
    supabase.auth.onAuthStateChange((event, session) => {
        if (event === 'SIGNED_IN') {
            postSignInSetup(session.user);
        } else if (event === 'SIGNED_OUT') {
            currentUser = null;
            userEmail.textContent = 'Not signed in';
            userRole.textContent = 'Visitor';
            userAvatar.textContent = 'A';
        }
    });

    // OPTIONAL: Protect page when not signed in - redirect to sign-in page if you have one
    (function protectPage() {
        // If you want to force login to access admin, uncomment:
        // if (!currentUser) location.href = '/signin.html';
    })();

    </script>
</body>
</html>

