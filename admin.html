<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - Trendora</title>
      <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700;800;900&amp;family=Inter:wght@300;400;500;600;700&amp;display=swap" rel="stylesheet">
    
    <!-- Remix Icon -->
    <link href="https://cdn.jsdelivr.net/npm/remixicon@4.0.0/fonts/remixicon.css" rel="stylesheet">
    
    <style>
      body {
        font-family: 'Inter', sans-serif;
      }
    </style>
    <script src="auth.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: #f3f4f6;
            color: #333;
        }

        .dashboard {
            display: flex;
            min-height: 100vh;
        }

        /* Sidebar */
        .sidebar {
            width: 260px;
            background: #1f2937;
            color: white;
            padding: 20px 0;
            position: fixed;
            height: 100vh;
            overflow-y: auto;
        }

        .logo {
            padding: 0 20px 20px;
            border-bottom: 1px solid #374151;
            margin-bottom: 20px;
        }

        .logo h2 {
            color: #d97706;
            font-size: 24px;
        }

        .logo p {
            font-size: 12px;
            color: #9ca3af;
            margin-top: 5px;
        }

        .nav-menu {
            list-style: none;
        }

        .nav-item {
            padding: 12px 20px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 12px;
            color: #d1d5db;
        }

        .nav-item:hover,
        .nav-item.active {
            background: #374151;
            color: white;
            border-left: 4px solid #d97706;
            padding-left: 16px;
        }

        .nav-item .icon {
            font-size: 20px;
        }

        /* Main Content */
        .main-content {
            flex: 1;
            margin-left: 260px;
            padding: 30px;
        }

        .header {
            background: white;
            padding: 20px 30px;
            border-radius: 10px;
            margin-bottom: 30px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header h1 {
            font-size: 28px;
            color: #1f2937;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            background: #d97706;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }

        /* Stats Cards */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }

        .stat-card .icon {
            width: 50px;
            height: 50px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            margin-bottom: 15px;
        }

        .stat-card.revenue .icon {
            background: #dbeafe;
            color: #1e40af;
        }

        .stat-card.orders .icon {
            background: #fef3c7;
            color: #d97706;
        }

        .stat-card.users .icon {
            background: #d1fae5;
            color: #059669;
        }

        .stat-card.products .icon {
            background: #e9d5ff;
            color: #7c3aed;
        }

        .stat-card h3 {
            color: #6b7280;
            font-size: 14px;
            font-weight: 500;
            margin-bottom: 8px;
        }

        .stat-card .value {
            font-size: 32px;
            font-weight: bold;
            color: #1f2937;
            margin-bottom: 8px;
        }

        .stat-card .change {
            font-size: 13px;
            color: #059669;
        }

        .stat-card .change.negative {
            color: #dc2626;
        }

        /* Content Sections */
        .content-section {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            margin-bottom: 30px;
            display: none;
        }

        .content-section.active {
            display: block;
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid #f3f4f6;
        }

        .section-header h2 {
            font-size: 22px;
            color: #1f2937;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s;
        }

        .btn-primary {
            background: #d97706;
            color: white;
        }

        .btn-primary:hover {
            background: #b45309;
        }

        .btn-secondary {
            background: #e5e7eb;
            color: #374151;
        }

        .btn-secondary:hover {
            background: #d1d5db;
        }

        .btn-danger {
            background: #dc2626;
            color: white;
        }

        .btn-success {
            background: #059669;
            color: white;
        }

        /* Form Styles */
        .form-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-bottom: 20px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-group.full-width {
            grid-column: 1 / -1;
        }

        .form-group label {
            margin-bottom: 8px;
            font-weight: 500;
            color: #374151;
            font-size: 14px;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            padding: 12px;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            font-size: 15px;
            font-family: inherit;
        }

        .form-group textarea {
            resize: vertical;
            min-height: 100px;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #d97706;
        }

        .image-upload {
            border: 2px dashed #d1d5db;
            padding: 40px;
            text-align: center;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .image-upload:hover {
            border-color: #d97706;
            background: #fef3c7;
        }

        .image-upload input[type="file"] {
            display: none;
        }

        .image-preview {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-top: 15px;
        }

        .image-preview img {
            width: 100px;
            height: 100px;
            object-fit: cover;
            border-radius: 6px;
            border: 2px solid #e5e7eb;
        }

        /* Table Styles */
        .table-container {
            overflow-x: auto;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        table thead {
            background: #f9fafb;
        }

        table th {
            padding: 15px;
            text-align: left;
            font-weight: 600;
            color: #374151;
            font-size: 13px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        table td {
            padding: 15px;
            border-bottom: 1px solid #f3f4f6;
            color: #6b7280;
        }

        table tbody tr:hover {
            background: #f9fafb;
        }

        .product-cell {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .product-image {
            width: 50px;
            height: 50px;
            object-fit: cover;
            border-radius: 6px;
            background: #f3f4f6;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
        }

        .status-badge {
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 500;
        }

        .status-badge.active {
            background: #d1fae5;
            color: #059669;
        }

        .status-badge.inactive {
            background: #fee2e2;
            color: #dc2626;
        }

        .status-badge.pending {
            background: #fef3c7;
            color: #d97706;
        }

        .status-badge.processing {
            background: #dbeafe;
            color: #1e40af;
        }

        .status-badge.completed {
            background: #d1fae5;
            color: #059669;
        }

        .status-badge.cancelled {
            background: #fee2e2;
            color: #dc2626;
        }

        .action-buttons {
            display: flex;
            gap: 8px;
        }

        .action-btn {
            padding: 6px 12px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 13px;
            transition: all 0.3s;
        }

        .action-btn.edit {
            background: #dbeafe;
            color: #1e40af;
        }

        .action-btn.delete {
            background: #fee2e2;
            color: #dc2626;
        }

        .action-btn.view {
            background: #e9d5ff;
            color: #7c3aed;
        }

        /* Search and Filter */
        .controls {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .search-box {
            flex: 1;
            min-width: 250px;
        }

        .search-box input {
            width: 100%;
            padding: 10px 15px;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            font-size: 14px;
        }

        .filter-select {
            padding: 10px 15px;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            font-size: 14px;
            cursor: pointer;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            padding: 30px;
            border-radius: 10px;
            max-width: 600px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .modal-header h3 {
            font-size: 20px;
        }

        .close-modal {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #6b7280;
        }

        .analytics-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-top: 20px;
        }

        .analytics-card {
            background: #f9fafb;
            padding: 20px;
            border-radius: 8px;
        }

        .analytics-card h4 {
            color: #374151;
            margin-bottom: 15px;
            font-size: 16px;
        }

        .metric-item {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid #e5e7eb;
        }

        .metric-item:last-child {
            border-bottom: none;
        }

        .metric-label {
            color: #6b7280;
            font-size: 14px;
        }

        .metric-value {
            font-weight: 600;
            color: #1f2937;
        }

        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #9ca3af;
        }

        .empty-state-icon {
            font-size: 64px;
            margin-bottom: 20px;
        }

        .empty-state h3 {
            font-size: 20px;
            color: #6b7280;
            margin-bottom: 10px;
        }

        .toast {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            background: #1f2937;
            color: white;
            padding: 1rem 1.5rem;
            border-radius: 6px;
            box-shadow: 0 10px25px rgba(0,0,0,0.3);
            transform: translateX(400px);
            transition: transform 0.3s;
            z-index: 3000;
        }
        
        .toast.show {
            transform: translateX(0);
        }
        
        .toast.success {
            background: #059669;
        }
        
        .toast.error {
            background: #dc2626;
        }

        /* Responsive */
        @media (max-width: 968px) {
            .sidebar {
                width: 70px;
            }

            .sidebar .logo p,
            .sidebar .nav-item span {
                display: none;
            }

            .main-content {
                margin-left: 70px;
            }

            .form-grid {
                grid-template-columns: 1fr;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            .analytics-grid {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 480px) {
            .main-content {
                padding: 15px;
            }

            .header {
                flex-direction: column;
                gap: 15px;
                align-items: flex-start;
            }

            .controls {
                flex-direction: column;
            }

            .search-box {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="dashboard">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="logo">
                <h2>TRENDORA</h2>
                <p>Admin Panel</p>
            </div>
            <ul class="nav-menu">
                <li class="nav-item active" data-section="dashboard">
                    <span class="icon">üìä</span>
                    <span>Dashboard</span>
                </li>
                <li class="nav-item" data-section="products">
                    <span class="icon">üì¶</span>
                    <span>Products</span>
                </li>
                <li class="nav-item" data-section="orders">
                    <span class="icon">üõí</span>
                    <span>Orders</span>
                </li>
                <li class="nav-item" data-section="users">
                    <span class="icon">üë•</span>
                    <span>Users</span>
                </li>
                <li class="nav-item" data-section="analytics">
                    <span class="icon">üìà</span>
                    <span>Analytics</span>
                </li>
                <li class="nav-item" data-section="sales">
                    <span class="icon">üí∞</span>
                    <span>Sales Report</span>
                </li>
                <li class="nav-item" data-section="categories">
                    <span class="icon">üè∑Ô∏è</span>
                    <span>Categories</span>
                </li>
                <li class="nav-item" data-section="settings">
                    <span class="icon">‚öôÔ∏è</span>
                    <span>Settings</span>
                </li>
                <li class="nav-item" onclick="logout()">
                    <span class="icon">üö™</span>
                    <span>Logout</span>
                </li>
            </ul>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Header -->
            <div class="header">
                <h1>Welcome Back, Admin!</h1>
                <div class="user-info">
                    <span>ADETUTU OLUWATOBI</span>
                    <div class="user-avatar">AO</div>
                </div>
            </div>

            <!-- Dashboard Section -->
            <section class="content-section active" id="dashboard">
                <div class="stats-grid">
                    <div class="stat-card revenue">
                        <div class="icon">üíµ</div>
                        <h3>Total Revenue</h3>
                        <div class="value" id="totalRevenue">$0</div>
                        <div class="change">‚Üë 12.5% from last month</div>
                    </div>
                    <div class="stat-card orders">
                        <div class="icon">üõçÔ∏è</div>
                        <h3>Total Orders</h3>
                        <div class="value" id="totalOrders">0</div>
                        <div class="change">‚Üë 8.3% from last month</div>
                    </div>
                    <div class="stat-card users">
                        <div class="icon">üë§</div>
                        <h3>Total Users</h3>
                        <div class="value" id="totalUsers">0</div>
                        <div class="change">‚Üë 15.2% from last month</div>
                    </div>
                    <div class="stat-card products">
                        <div class="icon">üì¶</div>
                        <h3>Total Products</h3>
                        <div class="value" id="totalProducts">0</div>
                        <div class="change">‚Üë 5.1% from last month</div>
                    </div>
                </div>

                <div style="background: white; padding: 30px; border-radius: 10px; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
                    <div class="section-header">
                        <h2>Recent Orders</h2>
                        <button class="btn btn-secondary" onclick="switchSection('orders')">View All</button>
                    </div>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Order ID</th>
                                    <th>Customer</th>
                                    <th>Date</th>
                                    <th>Total</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="recentOrdersTable">
                                <tr>
                                    <td colspan="6" class="empty-state">
                                        <div class="empty-state-icon">üì¶</div>
                                        <h3>No orders yet</h3>
                                        <p>Orders will appear here once customers make purchases</p>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- Products Section -->
            <section class="content-section" id="products">
                <div class="section-header">
                    <h2>Products Management</h2>
                    <button class="btn btn-primary" onclick="openModal('addProduct')">+ Add Product</button>
                </div>

                <div class="controls">
                    <div class="search-box">
                        <input type="text" placeholder="Search products..." id="productSearch" onkeyup="searchProducts()">
                    </div>
                    <select class="filter-select" id="productFilter" onchange="filterProducts()">
                        <option value="all">All Categories</option>
                        <option value="clothing">Clothing</option>
                        <option value="accessories">Accessories</option>
                        <option value="shoes">Shoes</option>
                        <option value="bags">Bags</option>
                    </select>
                </div>

                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Product</th>
                                <th>Category</th>
                                <th>Price</th>
                                <th>Stock</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="productsTable">
                            <!-- Products will be loaded here -->
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Orders Section -->
            <section class="content-section" id="orders">
                <div class="section-header">
                    <h2>Orders Management</h2>
                    <select class="filter-select" id="orderStatusFilter" onchange="filterOrders()">
                        <option value="all">All Orders</option>
                        <option value="pending">Pending</option>
                        <option value="processing">Processing</option>
                        <option value="completed">Completed</option>
                        <option value="cancelled">Cancelled</option>
                    </select>
                </div>

                <div class="controls">
                    <div class="search-box">
                        <input type="text" placeholder="Search orders..." id="orderSearch" onkeyup="searchOrders()">
                    </div>
                </div>

                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Order ID</th>
                                <th>Customer</th>
                                <th>Date</th>
                                <th>Items</th>
                                <th>Total</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="ordersTable">
                            <!-- Orders will be loaded here -->
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Users Section -->
            <section class="content-section" id="users">
                <div class="section-header">
                    <h2>Users Management</h2>
                    <button class="btn btn-primary" onclick="openModal('addUser')">+ Add User</button>
                </div>

                <div class="controls">
                    <div class="search-box">
                        <input type="text" placeholder="Search users..." id="userSearch" onkeyup="searchUsers()">
                    </div>
                </div>

                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Email</th>
                                <th>Phone</th>
                                <th>Joined Date</th>
                                <th>Orders</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="usersTable">
                            <!-- Users will be loaded here -->
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Analytics Section -->
            <section class="content-section" id="analytics">
                <div class="section-header">
                    <h2>Analytics Overview</h2>
                    <select class="filter-select">
                        <option>Last 7 Days</option>
                        <option>Last 30 Days</option>
                        <option>Last 90 Days</option>
                        <option>This Year</option>
                    </select>
                </div>

                <div class="analytics-grid">
                    <div class="analytics-card">
                        <h4>Top Selling Products</h4>
                        <div id="topProducts">
                            <div class="metric-item">
                                <span class="metric-label">No data available</span>
                                <span class="metric-value">-</span>
                            </div>
                        </div>
                    </div>

                    <div class="analytics-card">
                        <h4>Revenue by Category</h4>
                        <div id="revenueByCategory">
                            <div class="metric-item">
                                <span class="metric-label">No data available</span>
                                <span class="metric-value">-</span>
                            </div>
                        </div>
                    </div>

                    <div class="analytics-card">
                        <h4>Customer Insights</h4>
                        <div>
                            <div class="metric-item">
                                <span class="metric-label">New Customers</span>
                                <span class="metric-value" id="newCustomers">0</span>
                            </div>
                            <div class="metric-item">
                                <span class="metric-label">Returning Customers</span>
                                <span class="metric-value" id="returningCustomers">0</span>
                            </div>
                            <div class="metric-item">
                                <span class="metric-label">Avg. Order Value</span>
                                <span class="metric-value" id="avgOrderValue">$0</span>
                            </div>
                        </div>
                    </div>

                    <div class="analytics-card">
                        <h4>Performance Metrics</h4>
                        <div>
                            <div class="metric-item">
                                <span class="metric-label">Conversion Rate</span>
                                <span class="metric-value">0%</span>
                            </div>
                            <div class="metric-item">
                                <span class="metric-label">Cart Abandonment</span>
                                <span class="metric-value">0%</span>
                            </div>
                            <div class="metric-item">
                                <span class="metric-label">Customer Satisfaction</span>
                                <span class="metric-value">N/A</span>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Sales Report Section -->
            <section class="content-section" id="sales">
                <div class="section-header">
                    <h2>Sales Report</h2>
                    <div style="display: flex; gap: 10px;">
                        <select class="filter-select">
                            <option>This Month</option>
                            <option>Last Month</option>
                            <option>This Quarter</option>
                            <option>This Year</option>
                        </select>
                        <button class="btn btn-primary">Export Report</button>
                    </div>
                </div>

                <div class="stats-grid">
                    <div class="analytics-card">
                        <h4>Total Sales</h4>
                        <div class="metric-item">
                            <span class="metric-value" id="totalSales">$0</span>
                        </div>
                    </div>
                    <div class="analytics-card">
                        <h4>Orders Count</h4>
                        <div class="metric-item">
                            <span class="metric-value" id="salesOrderCount">0</span>
                        </div>
                    </div>
                    <div class="analytics-card">
                        <h4>Average Order</h4>
                        <div class="metric-item">
                            <span class="metric-value" id="salesAvgOrder">$0</span>
                        </div>
                    </div>
                    <div class="analytics-card">
                        <h4>Profit Margin</h4>
                        <div class="metric-item">
                            <span class="metric-value">0%</span>
                        </div>
                    </div>
                </div>

                <div style="background: white; padding: 30px; border-radius: 10px; margin-top: 20px; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
                    <h3 style="margin-bottom: 20px;">Daily Sales Chart</h3>
                    <div style="height: 300px; background: #f9fafb; border-radius: 6px; display: flex; align-items: center; justify-content: center; color: #9ca3af;">
                        üìä Sales chart visualization will be displayed here
                    </div>
                </div>
            </section>

            <!-- Categories Section -->
            <section class="content-section" id="categories">
                <div class="section-header">
                    <h2>Categories Management</h2>
                    <button class="btn btn-primary" onclick="openModal('addCategory')">+ Add Category</button>
                </div>

                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Category Name</th>
                                <th>Products</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="categoriesTable">
                            <!-- Categories will be loaded here -->
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Settings Section -->
            <section class="content-section" id="settings">
                <div class="section-header">
                    <h2>Settings</h2>
                </div>

                <div class="form-grid">
                    <div class="form-group full-width">
                        <label>Store Name</label>
                        <input type="text" value="Trendora" id="storeName">
                    </div>

                    <div class="form-group">
                        <label>Store Email</label>
                        <input type="email" value="admin@trendora.com" id="storeEmail">
                    </div>

                    <div class="form-group">
                        <label>Store Phone</label>
                        <input type="tel" value="+1 (555) 123-4567" id="storePhone">
                    </div>

                    <div class="form-group full-width">
                        <label>Store Address</label>
                        <textarea id="storeAddress">123 Fashion Street, Style City, SC 12345</textarea>
                    </div>

                    <div class="form-group">
                        <label>Currency</label>
                        <select id="storeCurrency">
                            <option>USD ($)</option>
                            <option>EUR (‚Ç¨)</option>
                            <option>GBP (¬£)</option>
                            <option>NGN (‚Ç¶)</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Tax Rate (%)</label>
                        <input type="number" value="8" id="taxRate" step="0.1">
                    </div>

                    <div class="form-group">
                        <label>Shipping Fee</label>
                        <input type="number" value="9.99" id="shippingFee" step="0.01">
                    </div>

                    <div class="form-group">
                        <label>Free Shipping Threshold</label>
                        <input type="number" value="100" id="freeShippingThreshold">
                    </div>

                    <div class="form-group full-width">
                        <label>Paystack Public Key</label>
                        <input type="text" placeholder="pk_test_xxxxxxxxxxxx" id="paystackKey">
                    </div>

                    <div class="form-group full-width">
                        <button class="btn btn-primary" onclick="saveSettings()">Save Settings</button>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Add Product Modal -->
    <div class="modal" id="addProductModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Add New Product</h3>
                <button class="close-modal" onclick="closeModal('addProduct')">&times;</button>
            </div>
            <form id="addProductForm">
                <div class="form-grid">
                    <div class="form-group full-width">
                        <label>Product Name *</label>
                        <input type="text" id="productName" required>
                    </div>

                    <div class="form-group">
                        <label>Category *</label>
                        <select id="productCategory" required>
                            <option value="">Select Category</option>
                            <option value="clothing">Clothing</option>
                            <option value="accessories">Accessories</option>
                            <option value="shoes">Shoes</option>
                            <option value="bags">Bags</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Price *</label>
                        <input type="number" id="productPrice" step="0.01" required>
                    </div>

                    <div class="form-group">
                        <label>Stock Quantity *</label>
                        <input type="number" id="productStock" required>
                    </div>

                    <div class="form-group">
                        <label>Status</label>
                        <select id="productStatus">
                            <option value="active">Active</option>
                            <option value="inactive">Inactive</option>
                        </select>
                    </div>

                    <div class="form-group full-width">
                        <label>Description</label>
                        <textarea id="productDescription" rows="4"></textarea>
                    </div>

                    <div class="form-group full-width">
                        <label>Product Image</label>
                        <div class="image-upload" onclick="document.getElementById('productImage').click()">
                            <input type="file" id="productImage" accept="image/*" onchange="previewImage(this)">
                            <p>üì∑ Click to upload image</p>
                            <small>PNG, JPG, GIF up to 5MB</small>
                        </div>
                        <div class="image-preview" id="productImagePreview"></div>
                    </div>

                    <div class="form-group full-width">
                        <button type="submit" class="btn btn-primary">Add Product</button>
                        <button type="button" class="btn btn-secondary" onclick="closeModal('addProduct')">Cancel</button>
                    </div>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Category Modal -->
    <div class="modal" id="addCategoryModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Add New Category</h3>
                <button class="close-modal" onclick="closeModal('addCategory')">&times;</button>
            </div>
            <form id="addCategoryForm">
                <div class="form-group">
                    <label>Category Name *</label>
                    <input type="text" id="categoryName" required>
                </div>
                <div class="form-group">
                    <label>Status</label>
                    <select id="categoryStatus">
                        <option value="active">Active</option>
                        <option value="inactive">Inactive</option>
                    </select>
                </div>
                <div class="form-group">
                    <button type="submit" class="btn btn-primary">Add Category</button>
                    <button type="button" class="btn btn-secondary" onclick="closeModal('addCategory')">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Toast Notification -->
    <div class="toast" id="toast"></div>

    <script>
        // Initialize data from localStorage
        let products = JSON.parse(localStorage.getItem('adminProducts')) || [];
        let categories = JSON.parse(localStorage.getItem('adminCategories')) || [
            { id: 1, name: 'Clothing', products: 0, status: 'active' },
            { id: 2, name: 'Accessories', products: 0, status: 'active' },
            { id: 3, name: 'Shoes', products: 0, status: 'active' },
            { id: 4, name: 'Bags', products: 0, status: 'active' }
        ];

        // Toast notification
        function showToast(message, type = 'success') {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.className = `toast ${type} show`;
            
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }

        // Navigation
        document.querySelectorAll('.nav-item').forEach(item => {
            item.addEventListener('click', function() {
                if (this.getAttribute('onclick')) return; // Skip logout button
                
                const section = this.getAttribute('data-section');
                switchSection(section);
            });
        });

        function switchSection(section) {
            // Update active nav item
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
                if (item.getAttribute('data-section') === section) {
                    item.classList.add('active');
                }
            });

            // Show selected section
            document.querySelectorAll('.content-section').forEach(sec => {
                sec.classList.remove('active');
            });
            document.getElementById(section).classList.add('active');
        }

        // Load Dashboard Stats
        function loadDashboardStats() {
            const orders = JSON.parse(localStorage.getItem('orders')) || [];
            const users = JSON.parse(localStorage.getItem('users')) || [];

            // Calculate total revenue
            const totalRevenue = orders.reduce((sum, order) => sum + (order.total || 0), 0);
            document.getElementById('totalRevenue').textContent = `$${totalRevenue.toFixed(2)}`;

            // Total orders
            document.getElementById('totalOrders').textContent = orders.length;

            // Total users
            document.getElementById('totalUsers').textContent = users.length;

            // Total products
            document.getElementById('totalProducts').textContent = products.length;

            // Load recent orders
            loadRecentOrders(orders.slice(0, 5));
        }

        // Load Recent Orders
        function loadRecentOrders(orders) {
            const table = document.getElementById('recentOrdersTable');
            
            if (orders.length === 0) {
                table.innerHTML = `
                    <tr>
                        <td colspan="6" style="text-align: center; padding: 40px; color: #9ca3af;">
                            <div style="font-size: 48px; margin-bottom: 10px;">üì¶</div>
                            <div style="font-size: 16px; color: #6b7280;">No orders yet</div>
                            <div style="font-size: 14px;">Orders will appear here once customers make purchases</div>
                        </td>
                    </tr>
                `;
                return;
            }

            table.innerHTML = orders.map(order => {
                const orderDate = new Date(order.paymentDate).toLocaleDateString('en-US', {
                    month: 'short',
                    day: 'numeric',
                    year: 'numeric'
                });

                return `
                    <tr>
                        <td>#${order.id.substring(0, 8)}</td>
                        <td>${order.customer.name}</td>
                        <td>${orderDate}</td>
                        <td>$${order.total.toFixed(2)}</td>
                        <td><span class="status-badge ${order.status.toLowerCase()}">${order.status}</span></td>
                        <td>
                            <div class="action-buttons">
                                <button class="action-btn view" onclick="viewOrder('${order.id}')">View</button>
                            </div>
                        </td>
                    </tr>
                `;
            }).join('');
        }

        // Load Products
        function loadProducts() {
            const table = document.getElementById('productsTable');
            
            if (products.length === 0) {
                table.innerHTML = `
                    <tr>
                        <td colspan="6" style="text-align: center; padding: 40px; color: #9ca3af;">
                            <div style="font-size: 48px; margin-bottom: 10px;">üì¶</div>
                            <div style="font-size: 16px; color: #6b7280;">No products yet</div>
                            <div style="font-size: 14px;">Click "Add Product" to create your first product</div>
                        </td>
                    </tr>
                `;
                return;
            }

            table.innerHTML = products.map(product => `
                <tr>
                    <td>
                        <div class="product-cell">
                            <div class="product-image">${product.image || 'üì¶'}</div>
                            <span>${product.name}</span>
                        </div>
                    </td>
                    <td>${product.category}</td>
                    <td>$${parseFloat(product.price).toFixed(2)}</td>
                    <td>${product.stock}</td>
                    <td><span class="status-badge ${product.status}">${product.status}</span></td>
                    <td>
                        <div class="action-buttons">
                            <button class="action-btn edit" onclick="editProduct(${product.id})">Edit</button>
                            <button class="action-btn delete" onclick="deleteProduct(${product.id})">Delete</button>
                        </div>
                    </td>
                </tr>
            `).join('');
        }

        // Load Orders
        function loadOrders() {
            const orders = JSON.parse(localStorage.getItem('orders')) || [];
            const table = document.getElementById('ordersTable');
            
            if (orders.length === 0) {
                table.innerHTML = `
                    <tr>
                        <td colspan="7" style="text-align: center; padding: 40px; color: #9ca3af;">
                            <div style="font-size: 48px; margin-bottom: 10px;">üõí</div>
                            <div style="font-size: 16px; color: #6b7280;">No orders yet</div>
                        </td>
                    </tr>
                `;
                return;
            }

            table.innerHTML = orders.map(order => {
                const orderDate = new Date(order.paymentDate).toLocaleDateString('en-US', {
                    month: 'short',
                    day: 'numeric',
                    year: 'numeric'
                });

                return `
                    <tr>
                        <td>#${order.id.substring(0, 10)}</td>
                        <td>${order.customer.name}</td>
                        <td>${orderDate}</td>
                        <td>${order.cart.length} items</td>
                        <td>$${order.total.toFixed(2)}</td>
                        <td><span class="status-badge ${order.status.toLowerCase()}">${order.status}</span></td>
                        <td>
                            <div class="action-buttons">
                                <button class="action-btn view" onclick="viewOrder('${order.id}')">View</button>
                                <button class="action-btn edit" onclick="updateOrderStatus('${order.id}')">Update</button>
                            </div>
                        </td>
                    </tr>
                `;
            }).join('');
        }

        // Load Users
        function loadUsers() {
            const users = JSON.parse(localStorage.getItem('users')) || [];
            const table = document.getElementById('usersTable');
            
            if (users.length === 0) {
                table.innerHTML = `
                    <tr>
                        <td colspan="6" style="text-align: center; padding: 40px; color: #9ca3af;">
                            <div style="font-size: 48px; margin-bottom: 10px;">üë•</div>
                            <div style="font-size: 16px; color: #6b7280;">No users yet</div>
                        </td>
                    </tr>
                `;
                return;
            }

            // Count orders per user
            const orders = JSON.parse(localStorage.getItem('orders')) || [];
            const ordersByUser = {};
            orders.forEach(order => {
                const email = order.customer.email;
                ordersByUser[email] = (ordersByUser[email] || 0) + 1;
            });

            table.innerHTML = users.map((user, index) => {
                const joinDate = new Date(user.joinDate || Date.now()).toLocaleDateString('en-US', {
                    month: 'short',
                    day: 'numeric',
                    year: 'numeric'
                });

                return `
                    <tr>
                        <td>${user.firstName} ${user.lastName}</td>
                        <td>${user.email}</td>
                        <td>${user.phone || 'N/A'}</td>
                        <td>${joinDate}</td>
                        <td>${ordersByUser[user.email] || 0}</td>
                        <td>
                            <div class="action-buttons">
                                <button class="action-btn view" onclick="viewUser('${user.email}')">View</button>
                                <button class="action-btn delete" onclick="deleteUser('${user.email}')">Delete</button>
                            </div>
                        </td>
                    </tr>
                `;
            }).join('');
        }

        // Load Categories
        function loadCategories() {
            const table = document.getElementById('categoriesTable');
            
            // Update product counts
            categories.forEach(category => {
                category.products = products.filter(p => p.category.toLowerCase() === category.name.toLowerCase()).length;
            });

            table.innerHTML = categories.map(category => `
                <tr>
                    <td>${category.name}</td>
                    <td>${category.products} products</td>
                    <td><span class="status-badge ${category.status}">${category.status}</span></td>
                    <td>
                        <div class="action-buttons">
                            <button class="action-btn edit" onclick="editCategory(${category.id})">Edit</button>
                            <button class="action-btn delete" onclick="deleteCategory(${category.id})">Delete</button>
                        </div>
                    </td>
                </tr>
            `).join('');

            localStorage.setItem('adminCategories', JSON.stringify(categories));
        }

        // Load Analytics
        function loadAnalytics() {
            const orders = JSON.parse(localStorage.getItem('orders')) || [];
            const users = JSON.parse(localStorage.getItem('users')) || [];

            // Calculate metrics
            const totalRevenue = orders.reduce((sum, order) => sum + (order.total || 0), 0);
            const avgOrderValue = orders.length > 0 ? totalRevenue / orders.length : 0;

            document.getElementById('newCustomers').textContent = users.length;
            document.getElementById('avgOrderValue').textContent = `$${avgOrderValue.toFixed(2)}`;

            // Top selling products
            const productSales = {};
            orders.forEach(order => {
                order.cart.forEach(item => {
                    if (!productSales[item.name]) {
                        productSales[item.name] = { quantity: 0, revenue: 0 };
                    }
                    productSales[item.name].quantity += item.quantity;
                    productSales[item.name].revenue += item.price * item.quantity;
                });
            });

            const topProductsDiv = document.getElementById('topProducts');
            const sortedProducts = Object.entries(productSales)
                .sort((a, b) => b[1].quantity - a[1].quantity)
                .slice(0, 5);

            if (sortedProducts.length > 0) {
                topProductsDiv.innerHTML = sortedProducts.map(([name, data]) => `
                    <div class="metric-item">
                        <span class="metric-label">${name}</span>
                        <span class="metric-value">${data.quantity} sold</span>
                    </div>
                `).join('');
            }

            // Revenue by category
            const categoryRevenue = {};
            orders.forEach(order => {
                order.cart.forEach(item => {
                    const product = products.find(p => p.name === item.name);
                    const category = product ? product.category : 'Other';
                    if (!categoryRevenue[category]) {
                        categoryRevenue[category] = 0;
                    }
                    categoryRevenue[category] += item.price * item.quantity;
                });
            });

            const revenueByCategoryDiv = document.getElementById('revenueByCategory');
            const sortedCategories = Object.entries(categoryRevenue)
                .sort((a, b) => b[1] - a[1]);

            if (sortedCategories.length > 0) {
                revenueByCategoryDiv.innerHTML = sortedCategories.map(([category, revenue]) => `
                    <div class="metric-item">
                        <span class="metric-label">${category}</span>
                        <span class="metric-value">$${revenue.toFixed(2)}</span>
                    </div>
                `).join('');
            }
        }

        // Load Sales Report
        function loadSalesReport() {
            const orders = JSON.parse(localStorage.getItem('orders')) || [];
            const totalRevenue = orders.reduce((sum, order) => sum + (order.total || 0), 0);
            const avgOrder = orders.length > 0 ? totalRevenue / orders.length : 0;

            document.getElementById('totalSales').textContent = `$${totalRevenue.toFixed(2)}`;
            document.getElementById('salesOrderCount').textContent = orders.length;
            document.getElementById('salesAvgOrder').textContent = `$${avgOrder.toFixed(2)}`;
        }

        // Modal Functions
        function openModal(type) {
            document.getElementById(`${type}Modal`).classList.add('active');
        }

        function closeModal(type) {
            document.getElementById(`${type}Modal`).classList.remove('active');
        }

        // Image Preview
        function previewImage(input) {
            const preview = document.getElementById('productImagePreview');
            preview.innerHTML = '';

            if (input.files && input.files[0]) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const img = document.createElement('img');
                    img.src = e.target.result;
                    preview.appendChild(img);
                };
                reader.readAsDataURL(input.files[0]);
            }
        }

        // Add Product Form
        document.getElementById('addProductForm').addEventListener('submit', function(e) {
            e.preventDefault();

            const newProduct = {
                id: Date.now(),
                name: document.getElementById('productName').value,
                category: document.getElementById('productCategory').value,
                price: parseFloat(document.getElementById('productPrice').value),
                stock: parseInt(document.getElementById('productStock').value),
                status: document.getElementById('productStatus').value,
                description: document.getElementById('productDescription').value,
                image: null,
                createdAt: new Date().toISOString()
            };

            products.push(newProduct);
            localStorage.setItem('adminProducts', JSON.stringify(products));

            showToast('Product added successfully!', 'success');
            closeModal('addProduct');
            this.reset();
            loadProducts();
            loadDashboardStats();
        });

        // Add Category Form
        document.getElementById('addCategoryForm').addEventListener('submit', function(e) {
            e.preventDefault();

            const newCategory = {
                id: Date.now(),
                name: document.getElementById('categoryName').value,
                products: 0,
                status: document.getElementById('categoryStatus').value
            };

            categories.push(newCategory);
            localStorage.setItem('adminCategories', JSON.stringify(categories));

            showToast('Category added successfully!', 'success');
            closeModal('addCategory');
            this.reset();
            loadCategories();
        });

        // Delete Product
        function deleteProduct(id) {
            if (confirm('Are you sure you want to delete this product?')) {
                products = products.filter(p => p.id !== id);
                localStorage.setItem('adminProducts', JSON.stringify(products));
                showToast('Product deleted successfully!', 'success');
                loadProducts();
                loadDashboardStats();
            }
        }

        // Delete Category
        function deleteCategory(id) {
            if (confirm('Are you sure you want to delete this category?')) {
                categories = categories.filter(c => c.id !== id);
                localStorage.setItem('adminCategories', JSON.stringify(categories));
                showToast('Category deleted successfully!', 'success');
                loadCategories();
            }
        }

        // Delete User
        function deleteUser(email) {
            if (confirm('Are you sure you want to delete this user?')) {
                let users = JSON.parse(localStorage.getItem('users')) || [];
                users = users.filter(u => u.email !== email);
                localStorage.setItem('users', JSON.stringify(users));
                showToast('User deleted successfully!', 'success');
                loadUsers();
                loadDashboardStats();
            }
        }

        // View Order Details
        function viewOrder(orderId) {
            const orders = JSON.parse(localStorage.getItem('orders')) || [];
            const order = orders.find(o => o.id === orderId);
            
            if (order) {
                alert(`Order Details:\n\nOrder ID: ${order.id}\nCustomer: ${order.customer.name}\nEmail: ${order.customer.email}\nTotal: $${order.total.toFixed(2)}\nStatus: ${order.status}\n\nItems:\n${order.cart.map(item => `- ${item.name} (x${item.quantity}) - $${(item.price * item.quantity).toFixed(2)}`).join('\n')}`);
            }
        }

        // Update Order Status
        function updateOrderStatus(orderId) {
            const newStatus = prompt('Enter new status (Pending/Processing/Completed/Cancelled):');
            
            if (newStatus) {
                const validStatuses = ['pending', 'processing', 'completed', 'cancelled'];
                const status = newStatus.toLowerCase();
                
                if (!validStatuses.includes(status)) {
                    showToast('Invalid status!', 'error');
                    return;
                }

                let orders = JSON.parse(localStorage.getItem('orders')) || [];
                const orderIndex = orders.findIndex(o => o.id === orderId);
                
                if (orderIndex !== -1) {
                    orders[orderIndex].status = status.charAt(0).toUpperCase() + status.slice(1);
                    localStorage.setItem('orders', JSON.stringify(orders));
                    showToast('Order status updated!', 'success');
                    loadOrders();
                    loadRecentOrders(orders.slice(0, 5));
                }
            }
        }

        // View User Details
        function viewUser(email) {
            const users = JSON.parse(localStorage.getItem('users')) || [];
            const user = users.find(u => u.email === email);
            
            if (user) {
                alert(`User Details:\n\nName: ${user.firstName} ${user.lastName}\nEmail: ${user.email}\nPhone: ${user.phone || 'N/A'}`);
            }
        }

        // Search Functions
        function searchProducts() {
            const searchTerm = document.getElementById('productSearch').value.toLowerCase();
            const filteredProducts = products.filter(p => 
                p.name.toLowerCase().includes(searchTerm) ||
                p.category.toLowerCase().includes(searchTerm)
            );
            displayFilteredProducts(filteredProducts);
        }

        function searchOrders() {
            const searchTerm = document.getElementById('orderSearch').value.toLowerCase();
            const orders = JSON.parse(localStorage.getItem('orders')) || [];
            const filteredOrders = orders.filter(o => 
                o.id.toLowerCase().includes(searchTerm) ||
                o.customer.name.toLowerCase().includes(searchTerm) ||
                o.customer.email.toLowerCase().includes(searchTerm)
            );
            displayFilteredOrders(filteredOrders);
        }

        function searchUsers() {
            const searchTerm = document.getElementById('userSearch').value.toLowerCase();
            const users = JSON.parse(localStorage.getItem('users')) || [];
            const filteredUsers = users.filter(u => 
                `${u.firstName} ${u.lastName}`.toLowerCase().includes(searchTerm) ||
                u.email.toLowerCase().includes(searchTerm)
            );
            displayFilteredUsers(filteredUsers);
        }

        // Filter Functions
        function filterProducts() {
            const category = document.getElementById('productFilter').value;
            const filteredProducts = category === 'all' ? products : products.filter(p => p.category === category);
            displayFilteredProducts(filteredProducts);
        }

        function filterOrders() {
            const status = document.getElementById('orderStatusFilter').value;
            const orders = JSON.parse(localStorage.getItem('orders')) || [];
            const filteredOrders = status === 'all' ? orders : orders.filter(o => o.status.toLowerCase() === status);
            displayFilteredOrders(filteredOrders);
        }

        // Display Filtered Data
        function displayFilteredProducts(filteredProducts) {
            const table = document.getElementById('productsTable');
            
            if (filteredProducts.length === 0) {
                table.innerHTML = `
                    <tr>
                        <td colspan="6" style="text-align: center; padding: 40px; color: #9ca3af;">
                            <div style="font-size: 48px; margin-bottom: 10px;">üîç</div>
                            <div style="font-size: 16px; color: #6b7280;">No products found</div>
                        </td>
                    </tr>
                `;
                return;
            }

            table.innerHTML = filteredProducts.map(product => `
                <tr>
                    <td>
                        <div class="product-cell">
                            <div class="product-image">${product.image || 'üì¶'}</div>
                            <span>${product.name}</span>
                        </div>
                    </td>
                    <td>${product.category}</td>
                    <td>$${parseFloat(product.price).toFixed(2)}</td>
                    <td>${product.stock}</td>
                    <td><span class="status-badge ${product.status}">${product.status}</span></td>
                    <td>
                        <div class="action-buttons">
                            <button class="action-btn edit" onclick="editProduct(${product.id})">Edit</button>
                            <button class="action-btn delete" onclick="deleteProduct(${product.id})">Delete</button>
                        </div>
                    </td>
                </tr>
            `).join('');
        }

        function displayFilteredOrders(filteredOrders) {
            const table = document.getElementById('ordersTable');
            
            if (filteredOrders.length === 0) {
                table.innerHTML = `
                    <tr>
                        <td colspan="7" style="text-align: center; padding: 40px; color: #9ca3af;">
                            <div style="font-size: 48px; margin-bottom: 10px;">üîç</div>
                            <div style="font-size: 16px; color: #6b7280;">No orders found</div>
                        </td>
                    </tr>
                `;
                return;
            }

            table.innerHTML = filteredOrders.map(order => {
                const orderDate = new Date(order.paymentDate).toLocaleDateString('en-US', {
                    month: 'short',
                    day: 'numeric',
                    year: 'numeric'
                });

                return `
                    <tr>
                        <td>#${order.id.substring(0, 10)}</td>
                        <td>${order.customer.name}</td>
                        <td>${orderDate}</td>
                        <td>${order.cart.length} items</td>
                        <td>$${order.total.toFixed(2)}</td>
                        <td><span class="status-badge ${order.status.toLowerCase()}">${order.status}</span></td>
                        <td>
                            <div class="action-buttons">
                                <button class="action-btn view" onclick="viewOrder('${order.id}')">View</button>
                                <button class="action-btn edit" onclick="updateOrderStatus('${order.id}')">Update</button>
                            </div>
                        </td>
                    </tr>
                `;
            }).join('');
        }

        function displayFilteredUsers(filteredUsers) {
            const table = document.getElementById('usersTable');
            
            if (filteredUsers.length === 0) {
                table.innerHTML = `
                    <tr>
                        <td colspan="6" style="text-align: center; padding: 40px; color: #9ca3af;">
                            <div style="font-size: 48px; margin-bottom: 10px;">üîç</div>
                            <div style="font-size: 16px; color: #6b7280;">No users found</div>
                        </td>
                    </tr>
                `;
                return;
            }

            const orders = JSON.parse(localStorage.getItem('orders')) || [];
            const ordersByUser = {};
            orders.forEach(order => {
                const email = order.customer.email;
                ordersByUser[email] = (ordersByUser[email] || 0) + 1;
            });

            table.innerHTML = filteredUsers.map(user => {
                const joinDate = new Date(user.joinDate || Date.now()).toLocaleDateString('en-US', {
                    month: 'short',
                    day: 'numeric',
                    year: 'numeric'
                });

                return `
                    <tr>
                        <td>${user.firstName} ${user.lastName}</td>
                        <td>${user.email}</td>
                        <td>${user.phone || 'N/A'}</td>
                        <td>${joinDate}</td>
                        <td>${ordersByUser[user.email] || 0}</td>
                        <td>
                            <div class="action-buttons">
                                <button class="action-btn view" onclick="viewUser('${user.email}')">View</button>
                                <button class="action-btn delete" onclick="deleteUser('${user.email}')">Delete</button>
                            </div>
                        </td>
                    </tr>
                `;
            }).join('');
        }

        // Edit Product
        function editProduct(id) {
            const product = products.find(p => p.id === id);
            if (!product) return;

            const newName = prompt('Product Name:', product.name);
            if (!newName) return;

            const newPrice = prompt('Price:', product.price);
            if (!newPrice) return;

            const newStock = prompt('Stock:', product.stock);
            if (!newStock) return;

            const productIndex = products.findIndex(p => p.id === id);
            products[productIndex] = {
                ...product,
                name: newName,
                price: parseFloat(newPrice),
                stock: parseInt(newStock)
            };

            localStorage.setItem('adminProducts', JSON.stringify(products));
            showToast('Product updated successfully!', 'success');
            loadProducts();
        }

        // Edit Category
        function editCategory(id) {
            const category = categories.find(c => c.id === id);
            if (!category) return;

            const newName = prompt('Category Name:', category.name);
            if (!newName) return;

            const categoryIndex = categories.findIndex(c => c.id === id);
            categories[categoryIndex].name = newName;

            localStorage.setItem('adminCategories', JSON.stringify(categories));
            showToast('Category updated successfully!', 'success');
            loadCategories();
        }

        // Save Settings
        function saveSettings() {
            const settings = {
                storeName: document.getElementById('storeName').value,
                storeEmail: document.getElementById('storeEmail').value,
                storePhone: document.getElementById('storePhone').value,
                storeAddress: document.getElementById('storeAddress').value,
                currency: document.getElementById('storeCurrency').value,
                taxRate: parseFloat(document.getElementById('taxRate').value),
                shippingFee: parseFloat(document.getElementById('shippingFee').value),
                freeShippingThreshold: parseFloat(document.getElementById('freeShippingThreshold').value),
                paystackKey: document.getElementById('paystackKey').value
            };

            localStorage.setItem('storeSettings', JSON.stringify(settings));
            showToast('Settings saved successfully!', 'success');
        }

        // Load Settings
        function loadSettings() {
            const settings = JSON.parse(localStorage.getItem('storeSettings'));
            
            if (settings) {
                document.getElementById('storeName').value = settings.storeName || 'Trendora';
                document.getElementById('storeEmail').value = settings.storeEmail || 'admin@trendora.com';
                document.getElementById('storePhone').value = settings.storePhone || '+1 (555) 123-4567';
                document.getElementById('storeAddress').value = settings.storeAddress || '123 Fashion Street, Style City, SC 12345';
                document.getElementById('storeCurrency').value = settings.currency || 'USD ($)';
                document.getElementById('taxRate').value = settings.taxRate || 8;
                document.getElementById('shippingFee').value = settings.shippingFee || 9.99;
                document.getElementById('freeShippingThreshold').value = settings.freeShippingThreshold || 100;
                document.getElementById('paystackKey').value = settings.paystackKey || '';
            }
        }

        // Logout
        function logout() {
            if (confirm('Are you sure you want to logout?')) {
                // Clear admin session
                localStorage.removeItem('adminLoggedIn');
                showToast('Logged out successfully', 'success');
                
                // Redirect to admin login page (if you have one) or home
                setTimeout(() => {
                    window.location.href = 'index.html';
                }, 1000);
            }
        }

        // Check Admin Authentication
        function checkAdminAuth() {
            const isAdminLoggedIn = localStorage.getItem('adminLoggedIn');
            
            if (!isAdminLoggedIn) {
                // Simple admin login prompt (you can create a proper login page)
                const username = prompt('Admin Username:');
                const password = prompt('Admin Password:');
                
                // Default credentials (change these in production!)
                if (username === 'admin' && password === 'admin123') {
                    localStorage.setItem('adminLoggedIn', 'true');
                    showToast('Welcome Admin!', 'success');
                } else {
                    alert('Invalid credentials! Default: admin/admin123');
                    window.location.href = 'index.html';
                }
            }
        }

        // Close modal when clicking outside
        window.onclick = function(event) {
            const modals = document.querySelectorAll('.modal');
            modals.forEach(modal => {
                if (event.target === modal) {
                    modal.classList.remove('active');
                }
            });
        }

        // Sync products to shop page
        function syncProductsToShop() {
            // Get active products
            const activeProducts = products.filter(p => p.status === 'active');
            
            // Format for shop page
            const shopProducts = activeProducts.map(p => ({
                id: p.id,
                name: p.name,
                price: p.price,
                category: p.category,
                description: p.description || 'Quality product from Trendora',
                image: p.image,
                rating: 4.5,
                reviews: Math.floor(Math.random() * 100) + 10
            }));

            // Save to localStorage for shop page
            localStorage.setItem('products', JSON.stringify(shopProducts));
            showToast('Products synced to shop successfully!', 'success');
        }

        // Add sync button to products section
        function addSyncButton() {
            const productsSection = document.getElementById('products');
            const sectionHeader = productsSection.querySelector('.section-header');
            
            const syncBtn = document.createElement('button');
            syncBtn.className = 'btn btn-success';
            syncBtn.textContent = 'üîÑ Sync to Shop';
            syncBtn.style.marginLeft = '10px';
            syncBtn.onclick = syncProductsToShop;
            
            sectionHeader.appendChild(syncBtn);
        }

        // Initialize on page load
        window.addEventListener('DOMContentLoaded', function() {
            // Check admin authentication
            checkAdminAuth();
            
            // Load all data
            loadDashboardStats();
            loadProducts();
            loadOrders();
            loadUsers();
            loadCategories();
            loadAnalytics();
            loadSalesReport();
            loadSettings();
            
            // Add sync button
            addSyncButton();

            // Show welcome message
            setTimeout(() => {
                showToast('Admin Dashboard loaded successfully!', 'success');
            }, 500);
        });

        // Auto-refresh dashboard stats every 30 seconds
        setInterval(() => {
            if (document.querySelector('#dashboard.active')) {
                loadDashboardStats();
            }
        }, 30000);

        // Export functions for console access
        window.adminFunctions = {
            loadDashboardStats,
            loadProducts,
            loadOrders,
            loadUsers,
            loadCategories,
            loadAnalytics,
            loadSalesReport,
            syncProductsToShop
        };
    </script>
</body>
</html>

