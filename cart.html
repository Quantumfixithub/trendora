<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Cart â€” Trendora</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <style>
    / Basic styles needed for header/cart (keep or move to styles.css) /
    :root{
      --accent-a:#667eea; --accent-b:#764ba2; --text:#17233a;
    }
    body{font-family:Inter,system-ui,Segoe UI,Roboto,Arial;background:#f6f7fb;margin:0;color:var(--text)}
    .container{max-width:1200px;margin:0 auto;padding:1rem}
    .header-nav{background:#fff;padding:0.7rem 1rem;box-shadow:0 2px 8px rgba(0,0,0,0.06);position:sticky;top:0;z-index:1000}
    .header-inner{max-width:1200px;margin:0 auto;display:flex;align-items:center;justify-content:space-between;gap:1rem}
    .nav-list{list-style:none;display:flex;gap:.75rem;margin:0;padding:0;align-items:center}
    .nav-link{text-decoration:none;color:#6b7280;padding:.45rem .6rem;border-radius:8px;font-weight:600}
    .shop-dropdown{position:absolute;left:0;top:calc(100% + 8px);background:#fff;border-radius:10px;box-shadow:0 10px 30px rgba(0,0,0,0.08);padding:8px;min-width:180px;display:none}
    .shop-dropdown a{display:block;padding:8px 12px;color:var(--text);text-decoration:none;border-radius:8px}
    .icon-group{display:flex;gap:.6rem;align-items:center}
    .hamburger{display:none;width:44px;height:44px;border-radius:10px;border:1px solid #eef2ff;background:#fff;align-items:center;justify-content:center;cursor:pointer}
    @media (max-width:900px){ .nav-list{display:none} .hamburger{display:flex} .shop-dropdown{position:static;margin-top:6px} .mobile-menu{display:block} .mobile-drawer{display:block} }
    / Minimal cart styles /
    .cart-layout{display:grid;grid-template-columns:1fr 360px;gap:1rem}
    .cart-item{display:flex;gap:1rem;padding:1rem;background:#fff;border-radius:12px;box-shadow:0 2px 8px rgba(0,0,0,0.06);align-items:center}
    @media (max-width:900px){ .cart-layout{grid-template-columns:1fr} }
  </style>
</head>
<body>
  <header class="header-nav" role="banner">
    <div class="header-inner">
      <a class="logo" href="index.html" style="display:flex;align-items:center;gap:.6rem;text-decoration:none;color:var(--text);font-weight:700">
        <span style="width:36px;height:36px;border-radius:8px;background:linear-gradient(135deg,var(--accent-a),var(--accent-b));display:inline-block"></span>
        Trendora
      </a>

  <nav class="nav-main" role="navigation" aria-label="Main Navigation">
    <ul class="nav-list" role="menubar" id="mainNav">
      <li class="nav-item" role="none"><a class="nav-link" role="menuitem" href="index.html">Home</a></li>

      <li class="nav-item" role="none" style="position:relative;">
        <a href="shop.html" class="nav-link" id="shopParent" role="menuitem">Shop</a>
        <button class="nav-link" id="shopCaret" aria-haspopup="true" aria-expanded="false" style="background:transparent;border:none;cursor:pointer;padding:0 6px;">â–¾</button>

        <div class="shop-dropdown" id="shopDropdown" role="menu" aria-label="Shop categories">
          <a href="women.html" role="menuitem">Women</a>
          <a href="men.html" role="menuitem">Men</a>
          <a href="accessories.html" role="menuitem">Accessories</a>
          <a href="shoes.html" role="menuitem">Shoes</a>
        </div>
      </li>

      <li class="nav-item" role="none"><a class="nav-link" role="menuitem" href="about.html">About</a></li>
      <li class="nav-item" role="none"><a class="nav-link" role="menuitem" href="contact.html">Contact</a></li>
    </ul>
  </nav>

  <div class="icon-group">
    <a class="account-link nav-link" href="signin.html">Sign In</a>
    <a href="cart.html" title="Cart" style="position:relative;text-decoration:none;color:var(--text);font-weight:700">ðŸ›’
      <span class="badge cart-count" id="cartCount" style="display:none;position:absolute;top:-8px;right:-10px;background:#ff5a5f;color:white;padding:2px 6px;border-radius:999px;font-size:0.7rem">0</span>
    </a>

    <button class="hamburger" id="hamburgerBtn" aria-label="Open menu" aria-haspopup="true" aria-expanded="false">
      <svg width="18" height="14" viewBox="0 0 18 14" fill="none" xmlns="http://www.w3.org/2000/svg"><rect width="18" height="2" rx="1" fill="#667EEA"/><rect y="6" width="18" height="2" rx="1" fill="#667EEA"/><rect y="12" width="18" height="2" rx="1" fill="#667EEA"/></svg>
    </button>
  </div>
</div>

<!-- Mobile drawer -->
<div class="mobile-menu" id="mobileMenu" aria-hidden="true" style="display:none;">
  <div class="mobile-drawer" role="dialog" aria-modal="true" aria-label="Main Menu">
    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:0.5rem">
      <strong>Menu</strong>
      <button class="hamburger" id="mobileClose" aria-label="Close menu">âœ•</button>
    </div>

    <ul class="nav-list">
      <li class="nav-item"><a class="nav-link" href="index.html">Home</a></li>
      <li class="nav-item">
        <div class="shop-toggle" style="display:flex;align-items:center;justify-content:space-between">
          <a class="nav-link" href="shop.html">Shop</a>
          <button class="nav-link" id="mobileShopToggle" aria-expanded="false" style="background:transparent;border:none;padding:4px 8px;cursor:pointer">â–¾</button>
        </div>
        <div class="shop-sub" id="mobileShopSub" style="display:none;margin-top:6px;padding-left:8px">
          <a class="nav-link" href="women.html">Women</a>
          <a class="nav-link" href="men.html">Men</a>
          <a class="nav-link" href="accessories.html">Accessories</a>
          <a class="nav-link" href="shoes.html">Shoes</a>
        </div>
      </li>
      <li class="nav-item"><a class="nav-link" href="about.html">About</a></li>
      <li class="nav-item"><a class="nav-link" href="contact.html">Contact</a></li>
      <li style="margin-top:0.6rem"><a class="btn" href="signin.html">Sign In</a></li>
    </ul>
  </div>
</div>
  

</header

  <div class="container">
    <h1 class="page-title">Shopping Cart ðŸ›’</h1>

<div class="cart-layout">
  <div class="cart-items" id="cartItems">
    <!-- Cart items will be loaded here -->
  </div>

  <aside class="cart-summary">
    <h3>Order Summary</h3>
    <div class="summary-row" style="display:flex;justify-content:space-between"><span>Subtotal:</span><span id="subtotal">$0.00</span></div>
    <div class="summary-row" style="display:flex;justify-content:space-between"><span>Tax (8%):</span><span id="tax">$0.00</span></div>
    <div class="summary-row" style="display:flex;justify-content:space-between"><span>Shipping:</span><span id="shipping">$9.99</span></div>
    <div class="summary-row total" style="display:flex;justify-content:space-between;margin-top:8px"><span>Total:</span><span id="total">$0.00</span></div>
    <div style="margin-top:12px;display:flex;gap:.5rem">
      <button class="checkout-btn" onclick="proceedToCheckout()" style="flex:1;padding:.8rem;border-radius:10px;border:0;background:linear-gradient(135deg,var(--accent-a),var(--accent-b));color:#fff">Proceed to Checkout ðŸ”’</button>
      <button class="continue-shopping" onclick="continueShopping()" style="padding:.8rem;border-radius:10px;border:1px solid #e6e9ef;background:#fff">Continue Shopping</button>
    </div>
    <p style="text-align:center;color:#999;font-size:.9rem;margin-top:1rem">ðŸšš Free shipping on orders over $100</p>
  </aside>
</div>
  

</div

  <script src="auth.js"></script>
  <script>
    // header/menu behavior (dropdown & mobile)
    (function(){
      const shopCaret = document.getElementById('shopCaret');
      const shopDropdown = document.getElementById('shopDropdown');
      const hamburgerBtn = document.getElementById('hamburgerBtn');
      const mobileMenu = document.getElementById('mobileMenu');
      const mobileClose = document.getElementById('mobileClose');
      const mobileShopToggle = document.getElementById('mobileShopToggle');
      const mobileShopSub = document.getElementById('mobileShopSub');

  // Toggle dropdown on caret click
  if (shopCaret && shopDropdown){
    shopCaret.addEventListener('click', (e)=> {
      e.stopPropagation();
      const isOpen = shopDropdown.style.display === 'block';
      shopDropdown.style.display = isOpen ? 'none' : 'block';
      shopCaret.setAttribute('aria-expanded', String(!isOpen));
    });
  }

  // Close dropdown when clicking outside
  document.addEventListener('click', (e)=>{
    if (shopDropdown && !shopDropdown.contains(e.target) && e.target !== shopCaret){
      shopDropdown.style.display = 'none';
      if (shopCaret) shopCaret.setAttribute('aria-expanded','false');
    }
  });

  // Mobile hamburger open
  if (hamburgerBtn && mobileMenu){
    hamburgerBtn.addEventListener('click', ()=> {
      mobileMenu.style.display = 'block';
      mobileMenu.setAttribute('aria-hidden','false');
      hamburgerBtn.setAttribute('aria-expanded','true');
    });
  }
  if (mobileClose){
    mobileClose.addEventListener('click', closeMobile);
  }
  if (mobileMenu){
    mobileMenu.addEventListener('click', (e)=>{
      if (e.target === mobileMenu) closeMobile();
    });
  }
  function closeMobile(){
    mobileMenu.style.display = 'none';
    mobileMenu.setAttribute('aria-hidden','true');
    if (hamburgerBtn) hamburgerBtn.setAttribute('aria-expanded','false');
  }

  // Mobile shop toggle
  if (mobileShopToggle && mobileShopSub){
    mobileShopToggle.addEventListener('click', ()=>{
      const expanded = mobileShopSub.style.display === 'block';
      mobileShopSub.style.display = expanded ? 'none' : 'block';
      mobileShopToggle.setAttribute('aria-expanded', String(!expanded));
    });
  }

  // ESC to close menus
  document.addEventListener('keydown', (e)=> {
    if (e.key === 'Escape'){
      if (shopDropdown) shopDropdown.style.display = 'none';
      closeMobile();
    }
  });

  // updateHeader if defined (cart count etc)
  window.addEventListener('storage', ()=> {
    try{ if(typeof updateHeader==='function') updateHeader(); }catch(e){}
  });
})();
  

</script

  <script>
    // Protect cart page
    if (typeof requireAuth === 'function') {
      requireAuth('cart.html');
    }

// Load and display cart
function loadCart() {
  const cart = JSON.parse(localStorage.getItem('cart')) || [];
  const cartContainer = document.getElementById('cartItems');
  const subtotalElement = document.getElementById('subtotal');
  const totalElement = document.getElementById('total');

  if (!cartContainer) {
    console.error('Cart container not found');
    return;
  }

  // Clear existing content
  cartContainer.innerHTML = '';

  if (cart.length === 0) {
    cartContainer.innerHTML = `
      <div style="text-align:center;padding:2.5rem;background:#fff;border-radius:12px">
        <div style="font-size:4rem;margin-bottom:1rem">ðŸ›’</div>
        <h2 style="color:#666;margin-bottom:.5rem">Your cart is empty</h2>
        <p style="color:#999;margin-bottom:1rem">Add some products to get started!</p>
        <a href="shop.html" style="display:inline-block;padding:.75rem 1.25rem;background:linear-gradient(135deg,var(--accent-a),var(--accent-b));color:#fff;border-radius:8px;text-decoration:none">Continue Shopping</a>
      </div>
    `;

    if (subtotalElement) subtotalElement.textContent = '$0.00';
    if (document.getElementById('tax')) document.getElementById('tax').textContent = '$0.00';
    if (document.getElementById('shipping')) document.getElementById('shipping').textContent = '$9.99';
    if (totalElement) totalElement.textContent = '$0.00';
    if (typeof updateCartCount === 'function') updateCartCount();
    return;
  }

  // Display cart items
  let subtotal = 0;

  cart.forEach(item => {
    const itemTotal = parseFloat(item.price) * parseInt(item.quantity || 1);
    subtotal += itemTotal;

    const cartItem = document.createElement('div');
    cartItem.className = 'cart-item';

    cartItem.innerHTML = `
      <div style="width:90px;height:90px;border-radius:8px;overflow:hidden;background:#f4f6fb;flex-shrink:0">
        ${item.image ? `<img src="${item.image}" alt="${item.name}" style="width:100%;height:100%;object-fit:cover">` : `<div style="display:flex;align-items:center;justify-content:center;height:100%">ðŸ“¦</div>`}
      </div>

      <div style="flex:1">
        <div style="font-weight:700">${item.name}</div>
        <div style="color:#7a869a">${item.category||''}</div>
        <div style="margin-top:.5rem;font-weight:800;color:#e74c3c">$${parseFloat(item.price).toFixed(2)}</div>
      </div>

      <div style="display:flex;flex-direction:column;align-items:flex-end;gap:.5rem">
        <div style="display:flex;gap:.4rem;align-items:center">
          <button class="btn-ghost" onclick="updateCartQuantity(${JSON.stringify(item.id)}, ${ (item.quantity||1) - 1 })">âˆ’</button>
          <div style="min-width:28px;text-align:center;font-weight:700">${item.quantity}</div>
          <button class="btn-ghost" onclick="updateCartQuantity(${JSON.stringify(item.id)}, ${ (item.quantity||1) + 1 })">+</button>
        </div>
        <button class="btn-ghost" onclick="removeFromCart(${JSON.stringify(item.id)})" style="color:#e74c3c">Remove</button>
      </div>
    `;
    cartContainer.appendChild(cartItem);
  });

  // Update totals
  const tax = subtotal * 0.08; // 8% tax
  const shipping = subtotal > 100 ? 0 : 9.99;
  const total = subtotal + tax + shipping;

  if (subtotalElement) subtotalElement.textContent = `$${subtotal.toFixed(2)}`;
  if (document.getElementById('tax')) document.getElementById('tax').textContent = `$${tax.toFixed(2)}`;
  if (document.getElementById('shipping')) document.getElementById('shipping').textContent = shipping === 0 ? 'FREE' : `$${shipping.toFixed(2)}`;
  if (totalElement) totalElement.textContent = `$${total.toFixed(2)}`;

  // Update cart count
  if (typeof updateCartCount === 'function') updateCartCount();
}

// Initialize cart on
loadCart();
  // Update cart every 2 seconds in case of changes from other tabs
  setInterval(loadCart, 2000);
});
</script>
</body>
</html>
