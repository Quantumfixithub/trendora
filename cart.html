<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shopping Cart - Trendora</title>
    <script src="auth.js"></script>
    <style>
        {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Ubuntu, sans-serif;
            background: #f8f9fa;
            color: #333;
        }

        header {
            background: white;
            padding: 1rem 5%;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1400px;
            margin: 0 auto;
        }

        .logo {
            font-size: 1.8rem;
            font-weight: bold;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-decoration: none;
        }

        .nav-links {
            display: flex;
            gap: 2rem;
            list-style: none;
        }

        .nav-links a {
            text-decoration: none;
            color: #555;
            font-weight: 500;
            transition: color 0.3s;
        }

        .nav-links a:hover {
            color: #667eea;
        }

        .nav-icons {
            display: flex;
            gap: 1.5rem;
            align-items: center;
        }

        .nav-icons a {
            color: #555;
            font-size: 1.2rem;
            text-decoration: none;
            position: relative;
        }

        .cart-count {
            position: absolute;
            top: -8px;
            right: -8px;
            background: #e74c3c;
            color: white;
            font-size: 0.7rem;
            padding: 2px 6px;
            border-radius: 10px;
            display: none;
        }

        .container {
            max-width: 1400px;
            margin: 2rem auto;
            padding: 0 5%;
        }

        .page-title {
            font-size: 2.5rem;
            color: #2c3e50;
            margin-bottom: 2rem;
        }

        .cart-layout {
            display: grid;
            grid-template-columns: 1fr 400px;
            gap: 2rem;
        }

        .cart-items {
            /* Items will be added here */
        }

        .cart-summary {
            background: white;
            padding: 2rem;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            height: fit-content;
            position: sticky;
            top: 100px;
        }

        .cart-summary h3 {
            font-size: 1.5rem;
            margin-bottom: 1.5rem;
            color: #2c3e50;
        }

        .summary-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 1rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid #eee;
        }

        .summary-row.total {
            font-size: 1.3rem;
            font-weight: bold;
            color: #2c3e50;
            border-bottom: none;
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 2px solid #2c3e50;
        }

        .checkout-btn {
            width: 100%;
            padding: 1rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 1rem;
        }

        .checkout-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .continue-shopping {
            width: 100%;
            padding: 1rem;
            background: white;
            color: #667eea;
            border: 2px solid #667eea;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 1rem;
        }

        .continue-shopping:hover {
            background: #667eea;
            color: white;
        }

        @media (max-width: 968px) {
            .cart-layout {
                grid-template-columns: 1fr;
            }

            .cart-summary {
                position: static;
            }

            .nav-links {
                display: none;
            }
        }

        /* Newly added css file */

        / Responsive header + hamburger + shop dropdown /
.header-nav { background:#fff; padding:0.7rem 1rem; box-shadow:0 2px 8px rgba(0,0,0,0.06); position:sticky; top:0; z-index:1000; }
.header-inner { max-width:1200px; margin:0 auto; display:flex; align-items:center; justify-content:space-between; gap:1rem; }
.nav-main { display:flex; gap:1rem; align-items:center; }
.nav-list { list-style:none; display:flex; gap:0.75rem; margin:0; padding:0; align-items:center; }
.nav-item { position:relative; }
.nav-link { text-decoration:none; color:#6b7280; padding:0.45rem 0.6rem; border-radius:8px; font-weight:600; }
.nav-link:hover { background:rgba(102,126,234,0.06); color:var(--accent-b); }

.shop-dropdown { position:absolute; left:0; top:calc(100% + 8px); background:#fff; border-radius:10px; box-shadow:0 10px 30px rgba(0,0,0,0.08); padding:8px; min-width:180px; display:none; }
.shop-dropdown a { display:block; padding:8px 12px; color:#17233a; text-decoration:none; border-radius:8px; }
.shop-dropdown a:hover { background:#f4f7ff; }

.icon-group { display:flex; gap:0.6rem; align-items:center; }

.hamburger{
  display:none;
  width:44px;height:44px;border-radius:10px;border:1px solid #eef2ff;background:#fff;align-items:center;justify-content:center;cursor:pointer;
}

/ Mobile menu /
.mobile-menu {
  display:none;
  position:fixed;
  inset:0;
  background:rgba(10,12,20,0.5);
  z-index:1100;
}
.mobile-drawer {
  width:280px;
  max-width:80%;
  height:100%;
  background:#fff;
  padding:1rem;
  box-shadow: 0 20px 60px rgba(0,0,0,0.2);
  transform:translateX(-12px);
  animation: slideIn .18s ease forwards;
}
.mobile-drawer .nav-list { display:block; }
.mobile-drawer .nav-item + .nav-item { margin-top:0.6rem; }
.mobile-drawer .shop-sub { padding-left:0.6rem; margin-top:0.4rem; display:none; }
.mobile-drawer .shop-toggle { display:flex; justify-content:space-between; align-items:center; width:100%; }

/ animations /
@keyframes slideIn { from { transform:translateX(-22px); opacity:0 } to { transform:translateX(0); opacity:1 } }

/ Responsive breakpoints /
@media (max-width:900px){
  .nav-list { display:none; }
  .hamburger { display:flex; }
}
@media (max-width:600px){
  .grid { grid-template-columns:repeat(2,1fr); }
}
    </style>
</head>
<body>
  <header>
  <nav style="background:#fff;padding:1rem;box-shadow:0 2px 8px rgba(0,0,0,0.06);position:sticky;top:0;z-index:1000;">
    <div style="max-width:1200px;margin:0 auto;display:flex;align-items:center;justify-content:space-between;gap:1rem;">
      <a href="index.html" class="logo" style="font-weight:700;text-decoration:none;color:#17233a;">Trendora</a>

  <ul class="nav-links" style="list-style:none;display:flex;gap:1rem;align-items:center;margin:0;padding:0;">
    <li><a href="index.html" style="text-decoration:none;color:#6b7280;">Home</a></li>

    <li style="position:relative;">
      <a href="shop.html" style="text-decoration:none;color:#6b7280;">Shop ‚ñæ</a>
      <ul style="position:absolute;left:0;top:calc(100% + 6px);background:#fff;border-radius:8px;box-shadow:0 6px 20px rgba(0,0,0,0.08);padding:8px;display:none;min-width:180px;" id="shopDropdown">
        <li><a href="women.html" style="display:block;padding:8px 12px;color:#17233a;text-decoration:none;">Women</a></li>
        <li><a href="men.html" style="display:block;padding:8px 12px;color:#17233a;text-decoration:none;">Men</a></li>
        <li><a href="accessories.html" style="display:block;padding:8px 12px;color:#17233a;text-decoration:none;">Accessories</a></li>
        <li><a href="shoes.html" style="display:block;padding:8px 12px;color:#17233a;text-decoration:none;">Shoes</a></li>
      </ul>
    </li>

    <li><a href="about.html" style="text-decoration:none;color:#6b7280;">About</a></li>
    <li><a href="contact.html" style="text-decoration:none;color:#6b7280;">Contact</a></li>
  </ul>

  <div class="nav-icons" style="display:flex;gap:1rem;align-items:center;">
    <a href="account.html" title="My Account" style="text-decoration:none;color:#17233a;">üë§</a>
    <a href="cart.html" title="Shopping Cart" style="position:relative;text-decoration:none;color:#17233a;">
      üõí
      <span class="cart-count" id="cartCount" style="position:absolute;top:-8px;right:-10px;background:#ff5a5f;color:#fff;padding:2px 6px;border-radius:999px;display:none;font-size:0.7rem;">0</span>
    </a>
  </div>
</div>
  
</nav
</header>

<script>
  // simple hover / focus toggle for Shop dropdown (works on touch by click)
  (function(){
    const parent = document.querySelector('nav li[style*="position:relative"]');
    const dd = document.getElementById('shopDropdown');

// show on hover (desktop)
parent.addEventListener('mouseenter', ()=> dd.style.display = 'block');
parent.addEventListener('mouseleave', ()=> dd.style.display = 'none');

// toggle on click (mobile)
parent.addEventListener('click', (e)=> {
  // prevent link navigation if clicking the parent anchor
  e.preventDefault();
  dd.style.display = dd.style.display === 'block' ? 'none' : 'block';
});

// close when clicking outside
document.addEventListener('click', (e)=>{
  if (!parent.contains(e.target)) dd.style.display = 'none';
});
  

})();
</script>


<script>
  (function(){
    const shopCaret = document.getElementById('shopCaret');
    const shopDropdown = document.getElementById('shopDropdown');
    const hamburgerBtn = document.getElementById('hamburgerBtn');
    const mobileMenu = document.getElementById('mobileMenu');
    const mobileClose = document.getElementById('mobileClose');
    const mobileShopToggle = document.getElementById('mobileShopToggle');
    const mobileShopSub = document.getElementById('mobileShopSub');

// Toggle dropdown on caret click (does NOT prevent navigation on sublinks)
shopCaret.addEventListener('click', (e)=> {
  e.stopPropagation();
  const isOpen = shopDropdown.style.display === 'block';
  shopDropdown.style.display = isOpen ? 'none' : 'block';
  shopCaret.setAttribute('aria-expanded', String(!isOpen));
});

// Close dropdown when clicking outside
document.addEventListener('click', (e)=>{
  if (!shopDropdown.contains(e.target) && e.target !== shopCaret){
    shopDropdown.style.display = 'none';
    shopCaret.setAttribute('aria-expanded','false');
  }
});

// Mobile hamburger open
hamburgerBtn.addEventListener('click', ()=> {
  mobileMenu.style.display = 'block';
  mobileMenu.setAttribute('aria-hidden','false');
  hamburgerBtn.setAttribute('aria-expanded','true');
});
mobileClose.addEventListener('click', closeMobile);
mobileMenu.addEventListener('click', (e)=>{
  if (e.target === mobileMenu) closeMobile();
});

function closeMobile(){
  mobileMenu.style.display = 'none';
  mobileMenu.setAttribute('aria-hidden','true');
  hamburgerBtn.setAttribute('aria-expanded','false');
}

// Mobile shop toggle
mobileShopToggle.addEventListener('click', ()=>{
  const expanded = mobileShopSub.style.display === 'block';
  mobileShopSub.style.display = expanded ? 'none' : 'block';
  mobileShopToggle.setAttribute('aria-expanded', String(!expanded));
});

// keyboard support: ESC to close menus
document.addEventListener('keydown', (e)=> {
  if (e.key === 'Escape'){
    shopDropdown.style.display = 'none';
    closeMobile();
  }
});

// keep badge/header updated (expects updateHeader() or updateAuthNavigation() present)
window.addEventListener('storage', ()=> {
  try{ if(typeof updateHeader==='function') updateHeader(); else if(typeof updateAuthNavigation==='function') updateAuthNavigation(); }catch(e){}
});
  

})();
</script>
</header>
    <div class="container">
        <h1 class="page-title">Shopping Cart üõí</h1>

        <div class="cart-layout">
            <div class="cart-items" id="cartItems">
                <!-- Cart items will be loaded here -->
            </div>

            <div class="cart-summary">
                <h3>Order Summary</h3>
                <div class="summary-row">
                    <span>Subtotal:</span>
                    <span id="subtotal">$0.00</span>
                </div>
                <div class="summary-row">
                    <span>Tax (8%):</span>
                    <span id="tax">$0.00</span>
                </div>
                <div class="summary-row">
                    <span>Shipping:</span>
                    <span id="shipping">$9.99</span>
                </div>
                <div class="summary-row total">
                    <span>Total:</span>
                    <span id="total">$0.00</span>
                </div>
                <button class="checkout-btn" onclick="proceedToCheckout()">
                    Proceed to Checkout üîí
                </button>
                <button class="continue-shopping" onclick="continueShopping()">
                    Continue Shopping
                </button>
                <p style="text-align: center; color: #999; font-size: 0.9rem; margin-top: 1rem;">
                    üöö Free shipping on orders over $100
                </p>
            </div>
        </div>
    </div>

    <script src="auth.js"></script>
   <script>
  // simple hover / focus toggle for Shop dropdown (works on touch by click)
  (function(){
    const parent = document.querySelector('nav li[style*="position:relative"]');
    const dd = document.getElementById('shopDropdown');

// show on hover (desktop)
parent.addEventListener('mouseenter', ()=> dd.style.display = 'block');
parent.addEventListener('mouseleave', ()=> dd.style.display = 'none');

// toggle on click (mobile)
parent.addEventListener('click', (e)=> {
  // prevent link navigation if clicking the parent anchor
  e.preventDefault();
  dd.style.display = dd.style.display === 'block' ? 'none' : 'block';
});

// close when clicking outside
document.addEventListener('click', (e)=>{
  if (!parent.contains(e.target)) dd.style.display = 'none';
});
  

})();

  // Protect cart page
  if (!requireAuth('cart.html')) {
      showAuthModal();
  }

  // Load and display cart
  function loadCart() {
      const cart = JSON.parse(localStorage.getItem('cart')) || [];
      const cartContainer = document.getElementById('cartItems');
      const subtotalElement = document.getElementById('subtotal');
      const totalElement = document.getElementById('total');

  if (!cartContainer) {
      console.error('Cart container not found');
      return;
  }

  // Clear existing content
  cartContainer.innerHTML = '';

  if (cart.length === 0) {
      cartContainer.innerHTML = `
          <div style="text-align: center; padding: 4rem 2rem; background: white; border-radius: 15px;">
              <div style="font-size: 5rem; margin-bottom: 1rem;">üõí</div>
              <h2 style="color: #666; margin-bottom: 1rem;">Your cart is empty</h2>
              <p style="color: #999; margin-bottom: 2rem;">Add some products to get started!</p>
              <a href="shop.html" style="
                  display: inline-block;
                  padding: 1rem 2rem;
                  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                  color: white;
                  text-decoration: none;
                  border-radius: 8px;
                  font-weight: 600;
              ">Continue Shopping</a>
          </div>
      `;

      if (subtotalElement) subtotalElement.textContent = '$0.00';
      if (document.getElementById('tax')) document.getElementById('tax').textContent = '$0.00';
      if (document.getElementById('shipping')) document.getElementById('shipping').textContent = '$9.99';
      if (totalElement) totalElement.textContent = '$0.00';
      updateCartCount();
      return;
  }

  // Display cart items
  let subtotal = 0;

  cart.forEach(item => {
      const itemTotal = parseFloat(item.price) * parseInt(item.quantity || 1);
      subtotal += itemTotal;

      const cartItem = document.createElement('div');
      cartItem.className = 'cart-item';
      cartItem.style.cssText = `
          display: flex;
          gap: 1.5rem;
          padding: 1.5rem;
          background: white;
          border-radius: 12px;
          margin-bottom: 1rem;
          box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      `;

      cartItem.innerHTML = `
          <div style="width: 100px; height: 100px; background: #f0f0f0; border-radius: 8px; overflow: hidden; flex-shrink: 0;">
              ${item.image ? `<img src="${item.image}" alt="${item.name}" style="width: 100%; height: 100%; object-fit: cover;">` : `<div style="display: flex; align-items: center; justify-content: center; height: 100%; font-size: 2rem;">üì¶</div>`}
          </div>

          <div style="flex: 1;">
              <h3 style="margin-bottom: 0.5rem; color: #2c3e50;">${item.name}</h3>
              <p style="color: #7f8c8d; margin-bottom: 0.5rem;">${item.category || 'Product'}</p>
              <p style="font-size: 1.2rem; font-weight: 600; color: #e74c3c;">$${parseFloat(item.price).toFixed(2)}</p>
          </div>

          <div style="display: flex; flex-direction: column; justify-content: space-between; align-items: flex-end;">
              <button onclick="removeFromCart(${JSON.stringify(item.id)})" style="
                  background: none;
                  border: none;
                  color: #e74c3c;
                  cursor: pointer;
                  font-size: 1.5rem;
              " title="Remove">üóëÔ∏è</button>

              <div style="display: flex; align-items: center; gap: 0.5rem;">
                  <button onclick="updateCartQuantity(${JSON.stringify(item.id)}, ${item.quantity - 1})" style="
                      width: 30px;
                      height: 30px;
                      border: 1px solid #ddd;
                      background: white;
                      border-radius: 5px;
                      cursor: pointer;
                  ">‚àí</button>
                  <span id="qty-${item.id}" style="min-width: 30px; text-align: center; font-weight: 600;">${item.quantity}</span>
                  <button onclick="updateCartQuantity(${JSON.stringify(item.id)}, ${item.quantity + 1})" style="
                      width: 30px;
                      height: 30px;
                      border: 1px solid #ddd;
                      background: white;
                      border-radius: 5px;
                      cursor: pointer;
                  ">+</button>
              </div>

              <p style="font-weight: 600; color: #2c3e50;">$${itemTotal.toFixed(2)}</p>
          </div>
      `;

      cartContainer.appendChild(cartItem);
  });

  // Update totals
  const tax = subtotal * 0.08; // 8% tax
  const shipping = subtotal > 100 ? 0 : 9.99;
  const total = subtotal + tax + shipping;

  if (subtotalElement) subtotalElement.textContent = `$${subtotal.toFixed(2)}`;
  if (document.getElementById('tax')) document.getElementById('tax').textContent = `$${tax.toFixed(2)}`;
  if (document.getElementById('shipping')) document.getElementById('shipping').textContent = shipping === 0 ? 'FREE' : `$${shipping.toFixed(2)}`;
  if (totalElement) totalElement.textContent = `$${total.toFixed(2)}`;

  // Update cart count
  updateCartCount();
  

}
  // Initialize cart on page load
  window.addEventListener('DOMContentLoaded', function() {
      loadCart();

  // Update cart every 2 seconds in case of changes from other tabs
  setInterval(loadCart, 2000);
  

});
</script>
</body>
</html>





